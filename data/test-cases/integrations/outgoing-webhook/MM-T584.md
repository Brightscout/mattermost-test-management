---
key: MM-T584
title: Outgoing webhook - default username and profile pic Trigger = posting anything in the specified channel
---

## MM-T584: Outgoing webhook - default username and profile pic Trigger = posting anything in the specified channel

### Details

| Name     | Value                           |
| :------- | :------------------------------ |
| Priority | Low                             |
| Status   | Active                          |
| Folder   | Integrations / Outgoing Webhook |
| Labels   | Hackfest,cy-prod                |
| Created  | 2020-05-19T10:45:29Z            |

### Steps

<hr/>

**Step 1**

> <article>Outgoing webhook - default username and profile pic<br>Trigger = posting anything in the specified channel<br>–––––––––––––––––––––––––<ol><li>&nbsp;In System console ➜ Integration ➜ Integration Management, set to true both "Enable integrations to override usernames and profile icons"</li><li>Copy "https://outgoing-webhook-01snptsk6qvz.runkit.sh/" as callback URL or setup one if not available (see "<a href="https://github.com/mattermost/mattermost-qa-automation/tree/master/server/release_test_webhook">https://github.com/mattermost/mattermost-qa-automation/tree/master/server/release_test_webhook</a>")</li><li>Set up outgoing webhook in Mattermost ➜ Integrations<ul><li>Title / description anything you like, leave content type as-is</li><li>Select a channel from the drop-down</li><li>Leave trigger words blank</li><li>Paste the URL from step 2 in the Callback URLs field</li><li>Leave username and profile picture blank</li><li>Save</li></ul></li><li>Post any message in the channel you selected</li><li>Have another user post in the channel you selected</li></ol></article>

**Test Data**

> <article><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1586334475181-Screen+Shot+2020-04-08+at+4.27.42+PM.png" style="width: 300px;" class="fr-fil fr-dib"></article>

**Expected**

> <article><ul><li>After a user posts in the selected channel, observe the webhook message and verify that it has expected payload and override</li><li>In the Mattermost channel, both users see a post like the following, where the username = webhook, and the profile pic is the webhook icon <span data-sheets-note="Incoming payload on /hook:

{ channel_id: 'tk68jnwkfjn65jk83xcrnn1cgo',
channel_name: 'town-square',
file_ids: '',
post_id: 'jzh6uypjsprwpxmbff1qqh8wbr',
team_domain: 'lm25mar',
team_id: 'fzxtu4c8et885mmbrpudaphi9c',
text: 'hiyo',
timestamp: '1535669181',
token: 'kn9wuapdupnttjaqfxapow6m7a',
trigger_word: 'hiyo',
user_id: 'uirwutjnafgjuke6jg7ttugayr',
user_name: 'linda-bk' }

Incoming header on /hook:
{ host: 'd6ecdab9.ngrok.io',
'user-agent': 'Go-http-client/1.1',
'content-length': '298',
accept: 'application/json',
'content-type': 'application/x-www-form-urlencoded',
'accept-encoding': 'gzip',
'x-forwarded-proto': 'https',
'x-forwarded-for': '52.91.64.181' }

Outgoing response:
{ text: '#### Outgoing Webhook Response\n - token: &quot;kn9wuapdupnttjaqfxapow6m7a&quot;\n - trigger_word: &quot;hiyo&quot;\n - text: &quot;hiyo&quot;\n - channel_name: &quot;town-square&quot;\n - team_domain: &quot;lm25mar&quot;\n',
username: '',
icon_url: 'https://docs.mattermost.com/_images/icon-76x76.png',
type: '',
response_type: 'in_channel' }" data-sheets-userformat='{"2":897,"3":{"1":0},"10":1,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;- After a user posts in the selected channel, observe the \&quot;Outgoing webhook response\&quot;, importantly verifying these fields:\n username: '',\n icon_url: 'http://www.mattermost.org/wp-content/uploads/2016/04/icon.png',\n\n- Response post appears in Mattermost as before, but this time it shows an image of two puppies as profile pic:&quot;}">seen in the test data column to the left</span></li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.3 (September 2018) |
| Related ticket(s) | (<strong><span style="color: rgb(65, 168, 95);">Story</span></strong>) <a href="https://mattermost.atlassian.net/browse/MM-8686">Add username and profile picture to outgoing webhooks setup page — MM-8686</a> |

<hr/>

### More Info

| Name                     | Value                                                                                              |
| :----------------------- | :------------------------------------------------------------------------------------------------- |
| Fix Versions             | v5.3 (September 2018)                                                                              |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?)                                                 |
| Cypress Reports          | RELEASE - TM4J-Key-Mapped-In-Cypress-Release - TM4J key found Cypress release run report (SDET/QA) |
| Team Ownership           | Integration Frameworks                                                                             |
| Manual Test Environments | Automated - No manual tests needed                                                                 |
| Cypress                  | in Production                                                                                      |
| Location                 | Integrations                                                                                       |
