{
  "id": 3968329,
  "key": "MM-T630",
  "name": "Incoming webhook with Slack attachment, mention in attachment `text`",
  "createdOn": "2020-01-08T12:57:42Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["cy-prod"],
  "component": null,
  "priority": { "id": 401951, "name": "Low" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 586858,
    "name": "Incoming Webhook",
    "parentId": 404284,
    "fullNames": ["Integrations", "Incoming Webhook"],
    "fullPath": "integrations/incoming-webhook"
  },
  "customFields": {
    "Fix Versions": ["v5.2 (August 2018)"],
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": "P3 - Deep Functions (Do extensive scenarios work?)",
    "Update notes": "Steve Mudie â€” Wednesday, March 03, 2021 8:26 AM<br />â€¢ Â Cypress Automation working as expected ðŸŽ‰<br />â€¢ Removed from relevant Manual Environments<br /><br />Dylan Haussermann - August 20 2021<br />- The payload being used did not properly expose a bug where the alignment of short fields was breaking when multiple rows are short fields are used.<br />- Updated the payload to use 6 short fields instead of 2 so the test validates against this alignment bug.<br />- https://github.com/mattermost/mattermost-webapp/pull/8534",
    "Rainforest": ["Evaluating"],
    "Cypress Reports": null,
    "Team Ownership": ["Integration Frameworks"],
    "Manual Test Environments": ["Automated - No manual tests needed"],
    "Detox": null,
    "Cypress": "Update",
    "MMCTL": null,
    "Last Updated": "",
    "Selenium": null,
    "Tags": [],
    "Location": "Integrations"
  },
  "steps": [
    {
      "inline": {
        "description": "Incoming webhook with Slack attachment, mention in attachment `text`<br />â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“<ol><li>Set up an incoming webhook with any title, description (can leave username and pic blank)</li><li>Copy the incoming webhook URL</li><li>Go back to team, make sure you're NOT viewing the channel the webhook is going to post to</li><li>In Postman, set up a POST with Body &gt; Raw containing the attached payload</li><li>In the payload / body, replace <span style=\"color:rgb(184, 49, 47)\">USER_ID</span> with your test User ID in this format:<br />&lt;@<span style=\"color:rgb(184, 49, 47)\">i57p7rc4stfg8gfwd71mhhrkoh</span>&gt;<br />(<strong>Tip</strong>: You can get your ID via <a href=\"https://postgres.test.mattermost.com/admin_console/user_management/users\" rel=\"noopener noreferrer\" target=\"_blank\">System Console âžœ Users</a>, ID is located below your username)<br /><br /></li><li>Send the POST</li></ol>",
        "testData": "{\"attachments\": [{\"type\": \"slack_attachment\", \"color\": \"#7CD197\", \"fields\": [{\"short\": false, \"title\": \"Area\", \"value\": \"Testing with a very long piece of text that will take up the whole width of the table (stopping short of the space where the thumbnail image is displayed). This is one more sentence to really make it a long field, and let's add a taco emoji :taco:.\"}, {\"short\": true, \"title\": \"Iteration\", \"value\": \"Testing\"}, {\"short\": true, \"title\": \"State\", \"value\": \"New\"}, {\"short\": false, \"title\": \"Reason\", \"value\": \"New defect reported\"}, {\"short\": false, \"title\": \"Random field\", \"value\": \"This is a field which is not marked as short so it should be rendered on a separate row\"}, {\"short\": true, \"title\": \"Short 1\", \"value\": \"Short field\"}, {\"short\": true, \"title\": \"Short 2\", \"value\": \"Another one\"}, {\"short\": true, \"title\": \"Short 3\", \"value\": \"Another one\"}, {\"short\": true, \"title\": \"Short 4\", \"value\": \"Another one\"}, {\"short\": true, \"title\": \"Short 5\", \"value\": \"Another one\"}, {\"short\": true, \"title\": \"Short 6\", \"value\": \"Another one\"}, {\"short\": true, \"title\": \"Field with link\", \"value\": \"&lt;http://example.com|Link&gt;\"}], \"mrkdwn_in\": [\"pretext\"], \"pretext\": \"Some text here to look at (verify eyes emoji) :eyes:\", \"text\": \"This is the text of the attachment. @USERNAME, there should be a small Jenkins thumbnail off to the right.\", \"thumb_url\": \"https://slack.global.ssl.fastly.net/7bf4/img/services/jenkins-ci_128.png\", \"title\": \"A slack attachment\", \"title_link\": \"https://www.google.com\"}]}",
        "expectedResult": "<ul><li>You get a mention, mention badge appears on channel in LHS, your username is highlighted in the attachment body of the webhook post</li><li>(This part should be the same as above) Verify webhook posts, emoji render, pretext and attachment render, link renders</li></ul>",
        "customFields": {
          "Fix Versions": ["v5.2 (August 2018)"],
          "Related ticket(s)": "(<strong><span style=\"color:rgb(65, 168, 95)\">Story</span></strong>) <a href=\"https://mattermost.atlassian.net/browse/MM-10957\">Allow webhook message attachments to trigger mentions â€” MM-10957</a>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "e43f4c155e4ca0f9d41e1f9dce48e3bfd9fa8bca97a92bbd8ab88187d5e0ec1d6ef4cef6b54b160aea47698d990cce84",
  "stepsHashed": "f88bb840ad1f1ee32252ac7fcde1e30afea75f24d5e552867bcfda47955470ee8658cf8ba80daed6852159f40167134f"
}
