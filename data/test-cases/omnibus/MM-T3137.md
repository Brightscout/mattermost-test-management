---
key: MM-T3137
title: Backup and restore
---

## MM-T3137: Backup and restore

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Normal               |
| Status   | Active               |
| Folder   | Omnibus              |
| Labels   | Cloud-N/A            |
| Created  | 2020-07-14T18:40:51Z |

### Steps

<hr/>

**Step 1**

> <article>Backup and restore<br>————————————————————————————<br>After the previous test:<ol><li>Run "mmomni backup"</li><li>&nbsp;Copy the backup tarball to a different server</li></ol></article>

**Expected**

> <article>After 1, a backup tarball file should be produced</article>

<hr/>

**Step 2**

> <article>In the new server:<ol><li>Run the "curl -o- <a href="https://deb.packages.mattermost.com/repo-setup.sh">https://deb.packages.mattermost.com/repo-setup.sh</a> | sudo bash"</li><li>Run "apt install mattermost-omnibus" and follow the steps</li></ol><br>Note: Can be tested too in the same server but should fully remove mattermost-omnibus, delete the database and almost put the server back to its initial state by:<br>""sudo systemctl stop mattermost &amp;&amp; sudo -u postgres dropdb mattermost &amp;&amp; sudo -u postgres dropuser mmuser &amp;&amp; sudo apt purge mattermost-omnibus -y &amp;&amp; sudo apt autoremove -y""<br><br></article>

**Expected**

> <article><ul><li>Mattermost-omnibus should install correctly</li></ul></article>

<hr/>

**Step 3**

> <article><ol><li>Run "mmomni restore BACKUP_TARBALL"</li></ol></article>

**Expected**

> <article><ul><li>The backup should be correctly restored</li></ul></article>

<hr/>

**Step 4**

> <article><ol><li>Run "mmomni reconfigure"</li></ol></article>

**Expected**

> <article><ul><li>The reconfigure command should work correctly</li></ul></article>

<hr/>

**Step 5**

> <article><ol><li>Go to the server URL</li></ol></article>

**Expected**

> <article><ul><li>The server should be accessible via http, as it was configured that way in the previous test</li></ul></article>

<hr/>

**Step 6**

> <article><ol><li>Login to the server and go to Town Square</li></ol></article>

**Expected**

> <article><ul><li>The contents of the channel should be the same ones that existed in the old server</li></ul></article>

<hr/>

### More Info

| Name                     | Value                                              |
| :----------------------- | :------------------------------------------------- |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?) |
| Rainforest               | N/A                                                |
| Team Ownership           | Server Platform                                    |
| Manual Test Environments | CLI                                                |
| Cypress                  | N/A                                                |
| Tags                     | Cloud N/A                                          |
| Location                 | Omnibus                                            |
