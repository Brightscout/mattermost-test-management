---
name: "Backup and restore"
status: Active
priority: Normal
team_ownership: "Server Platform"
---

## MM-T3137: Backup and restore

---

**Step 1**

Backup and restore\
————————————————————————————\
After the previous test:

1. Run "mmomni backup"
2.  Copy the backup tarball to a different server

**Expected**

After 1, a backup tarball file should be produced

---

**Step 2**

In the new server:

1. Run the "curl -o- <https://deb.packages.mattermost.com/repo-setup.sh> | sudo bash"
2. Run "apt install mattermost-omnibus" and follow the steps

\
Note: Can be tested too in the same server but should fully remove mattermost-omnibus, delete the database and almost put the server back to its initial state by:\
""sudo systemctl stop mattermost && sudo -u postgres dropdb mattermost && sudo -u postgres dropuser mmuser && sudo apt purge mattermost-omnibus -y && sudo apt autoremove -y""

**Expected**

- Mattermost-omnibus should install correctly

---

**Step 3**

1. Run "mmomni restore BACKUP\_TARBALL"

**Expected**

- The backup should be correctly restored

---

**Step 4**

1. Run "mmomni reconfigure"

**Expected**

- The reconfigure command should work correctly

---

**Step 5**

1. Go to the server URL

**Expected**

- The server should be accessible via http, as it was configured that way in the previous test

---

**Step 6**

1. Login to the server and go to Town Square

**Expected**

- The contents of the channel should be the same ones that existed in the old server
