---
key: MM-T4043
title: Transferring subscriptions
---

## MM-T4043: Transferring subscriptions

**Precondition**

> <article><strong>Requires a sandbox instance of Zendesk with an oAuth 2 application configured.</strong> <br><br>- No Support yet for RN mobile apps</article>

### Details

| Name     | Value                    |
| :------- | :----------------------- |
| Priority | Low                      |
| Status   | Active                   |
| Folder   | Apps Framework / Zendesk |
| Created  | 2021-05-06T15:06:07Z     |

### Steps

<hr/>

**Step 1.2**

> <article>1. Create or locate a test user who has an admin role in Mattermost<br>2. Create or locate a user in Zendesk who has an admin role<br>3. Login to Mattermost as the user from step 1.<br>4. Use the <em>/zendesk connect&nbsp;</em>command to connect to Zendesk as the user from step 2.</article>

**Expected**

> <article>User is connected and the <em>subscribe&nbsp;</em>command is visible as well as the <em>create target</em> command</article>

<hr/>

**Step 1.3**

> <article>1. Ensure you are on a server where subscriptions has not yet been setup<br>2. Run the <em>/zendesk subscribe&nbsp;</em>command<br>3. Run the <em>/zendesk Setup-Target&nbsp;</em>command<br>4.&nbsp;Run the <em>/zendesk subscribe&nbsp;</em>command</article>

**Expected**

> <article>On 2. User see's an ephemeral post from the Zendesk bot that subscriptions have not been configured<br>On 3. User see's an ephemeral post from the Zendesk bot that subscriptions target has been created<br>On 4. The subscribe modal opens</article>

<hr/>

**Step 1.4**

> <article>1. Select the <em>Create New&nbsp;</em>option<br>2. Add a name and select any of the fields<br>3. Save</article>

**Expected**

> <article>The modal closes and user sees an ephemeral post that the subscription is saving to Zendesk and this will take a moment</article>

<hr/>

**Step 1.5**

> <article>1. Locate the Zendesk icon in the channel header<br>2. Click the Zendesk icon<br>3. Select the <em>Create New&nbsp;</em>option<br>4. Add a name and select any of the fields<br>5. Save</article>

**Expected**

> <article>On 2. The subscribe modal opens<br>On 5. The modal closes and user sees an ephemeral post that the subscription is saving to Zendesk and this will take a moment<br><br></article>

<hr/>

**Step 1.6**

> <article>1. Login to Mattermost as a different test user<br>2. Use the <em>/zendesk connect&nbsp;</em>command to connect to Zendesk as a new user who is also an admin<br>3. Type <em>/zendesk&nbsp;</em><br>4. Run <em>/zendesk Subscribe</em><br><em>5. Select the <em>Create New&nbsp;</em>option<br>6. Add a name and select any of the fields<br>7. Save</em></article>

**Expected**

> <article>On 2. Use the connection ink to authenticate the test user into Zendesk<br>On 3. The subscribe command is available<br>On 4. The subscribe modal opens<br>On 7. The modal closes and user sees an ephemeral post that the subscription is saving to Zendesk and this will take a moment<br><br></article>

<hr/>

**Step 2**

> <article>1. Login to Mattermost as the user who setup the subscription by creating the target<br>2. Run <em>/zendesk disconnect</em></article>

**Expected**

> <article>On 2. The Zendesk Bot shows an ephemeral post:<br><em>This mattermost account is connected via oauth2 to Zendesk for subscription functionality and cannot be disconnected until the access token is updated to a new user access token. Please have another connected Mattermost System Admin user with Zendesk Admin privileges run <code>/zendesk setup-target</code> to update the access_token</em></article>

<hr/>

**Step 3**

> <article>1. Login as the test user from step 6. who is also a Mattermost sys admin and an Admin in Zendesk<br>2. Type <em>/zendesk&nbsp;</em><br>3. Run <em>/zendesk&nbsp;</em><em>setup-target</em> to update the auth token being used by subscriptions</article>

**Expected**

> <article>On 2. the <em>setup-target&nbsp;</em>command is visible<br>On 3. User see's an ephemeral post from the Zendesk bot that subscriptions target has been created</article>

<hr/>

**Step 4**

> <article>1. Login to Mattermost as the user from step 7. who created the subscription<br>2. Run <em>/zendesk disconnect</em></article>

**Expected**

> <article>The user can disconnect now that the subscriptions token has been transferred. <br>User see's a post from the Zendesk Bot confirming they have disconnected</article>

<hr/>

**Step 5**

> <article>1. In any channel, locate or create a subscription<br>2. Note one or more of the fields targeted by the subscription<br>3. Login to Zendesk and select an ticket where the field(s) are on the form being used<br>4. Modify the target field<br>5. Wait about 30 seconds</article>

**Expected**

> <article>The subscription event &nbsp;is delivered. <br>Subscriptions remain functional after oAuth token has been transferred</article>

<hr/>

### More Info

| Name                     | Value          |
| :----------------------- | :------------- |
| Manual Test Environments | Webapp,Desktop |
| Tags                     | Never tested   |
| Location                 | Integrations   |
