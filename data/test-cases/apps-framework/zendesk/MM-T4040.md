---
key: MM-T4040
title: Zendesk Permissions respected in Mattermost
---

## MM-T4040: Zendesk Permissions respected in Mattermost

**Precondition**

> <article><strong>Requires a sandbox instance of Zendesk with an oAuth 2 application configured.</strong> <br><br>- No Support yet for RN mobile apps</article>

### Details

| Name     | Value                    |
| :------- | :----------------------- |
| Priority | Low                      |
| Status   | Active                   |
| Folder   | Apps Framework / Zendesk |
| Created  | 2021-05-06T01:15:03Z     |

### Steps

<hr/>

**Step 1.2**

> <article>Run <em>/zendesk configure</em> command</article>

**Expected**

> <article>The oAuth modal opens</article>

<hr/>

**Step 1.3**

> <article>1. Add your Zendesk instance URL<br>2. Add the Client ID for your oAuth application<br>3. Add the Client Secret for your oAuth application<br>4. Save</article>

**Expected**

> <article>Ephemeral post from the Zendesk bot confirms the config was updated.</article>

<hr/>

**Step 1.4**

> <article>1. Switch to any other channel you don't have open<br>2.  type&nbsp;<em>/zendesk&nbsp;</em></article>

**Expected**

> <article>The <em>connect&nbsp;</em>command is now available</article>

<hr/>

**Step 2**

> <article>Add call to configure subscriptions</article>

<hr/>

**Step 3**

> <article>1. In Zendesk locate or configure a test user to have "End-User" Permissions<br>2. Login to Mattermost as the test user<br>3. Use the <em>/zendesk connect&nbsp;</em>command to connect as the user identified in step 1</article>

**Expected**

> <article>A DM is received from Zendesk bot informing the user that Zendesk functionality can only be used by Zendesk Agents and Admins</article>

<hr/>

**Step 4**

> <article>1. Type <em>/zendesk&nbsp;</em><br>2<em>.&nbsp;</em>Note there is no Zendesk subscriptions binding in the channel header<em>&nbsp;</em><br>3. Click the ... menu for any non-system post</article>

**Expected**

> <article>On 1.<br><em>- Disconnect&nbsp;</em>and <em>Help&nbsp;</em>options are visible (there will be others if the test user is a sysadmin - See &lt;&gt; for Mattermost role permissions)<br>- <em>Subscribe</em> command is <strong>not&nbsp;</strong>visible<br>On 2. Channel header binding for subscriptions is hidden from Zendesk "end users"<br>On 3. The create ticket option is hidden from Zendesk "end users"<br><br></article>

<hr/>

**Step 5**

> <article>1. Type <em>/zendesk</em> <em>Disconnect</em> to disconnect the test user from Zendesk <br>2. Login to Zendesk as a Administrator <br>3. Modify the test user's role to be "Staff"<br>4. Use the admin configurator tool to grant the user any agent role lower than Admin ex: "Light Agent"<br>5. Save role changes</article>

**Expected**

> <article>User promoted in Zendesk</article>

<hr/>

**Step 6**

> <article>1. Login to Mattermost as a test user<br>2. Use the <em>/zendesk connect&nbsp;</em>command to connect as the user modified in step 5.</article>

**Expected**

> <article>A DM is received from Zendesk bot informing the user they have successfully connected to Zendesk</article>

<hr/>

**Step 7**

> <article>1. Type <em>/zendesk&nbsp;</em><br>2<em>.&nbsp;</em>Note there is no Zendesk subscriptions binding in the channel header<em>&nbsp;</em><br>3. Click the ... menu for any non-system post</article>

**Expected**

> <article>On 1.<br><em>- Disconnect&nbsp;</em>and <em>Help&nbsp;</em>options are visible (there will be others if the test user is a sysadmin - See MM-T4041 for Mattermost role permissions)<br>- <em>Subscribe</em> command is <strong>not&nbsp;</strong>visible<br>On 2. Channel header binding for subscriptions is hidden from Zendesk "Agents"<br>On 3. The create ticket option is available for Zendesk "Agents"<br><br></article>

<hr/>

**Step 8**

> <article>1. Type <em>/zendesk</em> <em>Disconnect</em> to disconnect the test user from Zendesk<br>2. Login to Zendesk as a Administrator<br>3. Modify the test user's role to be "Staff" (if not already done)<br>4. Use the admin configurator tool to grant the user the Admin role<br>5. Save role changes</article>

**Expected**

> <article>User promoted in Zendesk</article>

<hr/>

**Step 9**

> <article>1. Login to Mattermost as a test user<br>2. Use the <em>/zendesk connect&nbsp;</em>command to connect as the user modified in step 8.</article>

**Expected**

> <article>A DM is received from Zendesk bot informing the user they have successfully connected to Zendesk</article>

<hr/>

**Step 10**

> <article>1. Type <em>/zendesk&nbsp;</em><br>2<em>.&nbsp;</em>Note there <strong>is</strong>&nbsp;a Zendesk subscriptions binding in the channel header<em>&nbsp;</em><br>3. Click the ... menu for any non-system post</article>

**Expected**

> <article>On 1.<br><em>- Disconnect&nbsp;</em>and <em>Help&nbsp;</em>options are visible<br>- <em>Subscribe</em> <strong>is&nbsp;</strong>visible<br>- There will be others if the test user is a sysadmin - See MM-T4041 for Mattermost role permissions<br>On 2. Channel header binding for subscriptions is shown to Zendesk "Admins" when they are connected<br>On 3. The create ticket option is available for Zendesk "Admins"<br><br></article>

<hr/>

### More Info

| Name                     | Value          |
| :----------------------- | :------------- |
| Manual Test Environments | Webapp,Desktop |
| Tags                     | Never tested   |
| Location                 | Integrations   |
