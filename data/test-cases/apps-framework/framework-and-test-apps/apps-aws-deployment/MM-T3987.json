{
  "id": 10122020,
  "key": "MM-T3987",
  "name": "Deploy an App to AWS",
  "createdOn": "2021-04-12T16:38:40Z",
  "objective": "This test will deploy the Service Now app as an AWS Lambda function",
  "precondition": "- Access to AWS<br>- Permissions to upload something to the `mattermost-apps-bucket-test` S3 bucket in AWS<br>- Current version of the `mattermost-plugin-apps` plugin&nbsp;",
  "estimatedTime": null,
  "labels": [],
  "component": null,
  "priority": { "id": 401950, "name": "Normal" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 1285252,
    "name": "Apps AWS Deployment",
    "parentId": 1236115,
    "fullNames": ["Apps Framework", "Framework and test apps", "Apps AWS Deployment"],
    "fullPath": "apps-framework/framework-and-test-apps/apps-aws-deployment"
  },
  "customFields": {
    "Fix Versions": [],
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": null,
    "Update notes": "",
    "Rainforest": [],
    "Team Ownership": [],
    "Cypress Reports": null,
    "Manual Test Environments": ["Webapp"],
    "Detox": null,
    "Cypress": null,
    "MMCTL": null,
    "Selenium": null,
    "Last Updated": "",
    "Tags": ["Never tested"],
    "Location": "Integrations"
  },
  "steps": [
    {
      "inline": {
        "description": "Set environment variables that will link tour local Mattermost server to the AWS instance<br>1. Open a terminal and navigate to your 'mattermost-server' repo<br>2. Stop your server IF it's running<br>3. Type <em>export MM_APPS_S3_BUCKET=mattermost-apps-assets-bucket-test</em><br>4. Type <em>export APPS_INVOKE_AWS_ACCESS_KEY=&lt;test user's access key&gt;</em><br>5. Type <em>export APPS_INVOKE_AWS_SECRET_KEY==&lt;test user's secret key&gt;</em><br>6. Start your local Mattermost server by typing <em>make run-server MM_FEATUREFLAGS_AppsEnabled=true</em>",
        "testData": null,
        "expectedResult": "",
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Configure the proxy plugin to register the test app<br>1. Clone down the proxy plugin repo <em>https://github.com/mattermost/mattermost-plugin-apps</em><br>2. Open <em>mattermost-plugin-apps/assets/manifests.json</em><br>3<em>.&nbsp;</em>Ads a record for the app you with to deploy ex: <em>\"com.mattermost.servicenow\": \"0.1.0\"</em><br>4. Build the proxy plugin<br><br>",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Start an ngrok tunnel that will expose your local Mattermost server to an external DNS",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Upload the modified apps plugin<br>1. Navigate to your local and open the plugin settings in the system console<br>2. Upload the plugin build is step 2. - Overwrite the existing version if it's installed<br>3. Ensure the plugin is running",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Build the app bundles for Service Now<br>1. Clone down the Service Now repo <em>https://github.com/mattermost/mattermost-app-servicenow</em><br>2<em>.&nbsp;</em>Open a terminal and cd into the Service Now directory<br>3. Type <em>make&nbsp;</em>to compile the plugin<br>4. Open the <em>dist </em>folder and ensure<em> bundle.zip&nbsp;</em>is present",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "1. Login to One Login here https://mattermost.onelogin.com/login<br>2. Select AWS and login asa developer<br>3. Locate and select S3 from the services<br>4. Locate the \"mattermost-apps-bucket-test\" bucket <br>5. Upload the bundle build in step 5.",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Install the bundle<br>1. Navigate to your local via the ngrok tunnel setup in step 3.<br>2. Type <em>/apps list&nbsp;</em>and ensure <em>com.mattermost.servicenow&nbsp;</em>is listed and the <em>type&nbsp;</em>in the <em>status&nbsp;</em>colum is showing as <em>aws_lambda</em><br>3. type <em>/apps install --app-id &nbsp;com.mattermost.servicenow</em><br><br>",
        "testData": null,
        "expectedResult": null,
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "b9357ad4dca66b345656e031f8fd4e7e906a0ee3d823d8c3ae06dd7e753b168be6a4e22074d7e0a93fe581fc8bc2dd71",
  "stepsHashed": "2cf3bf3cb5a6af1d68f2d16db2cfc14d2d238f58362949a40a13cc7d280999da4404788b5588698e8cbce9eb9293acf9"
}
