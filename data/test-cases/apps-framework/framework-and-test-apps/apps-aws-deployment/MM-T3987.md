---
key: MM-T3987
title: Deploy an App to AWS
---

## MM-T3987: Deploy an App to AWS

**Objective**

> <article>This test will deploy the Service Now app as an AWS Lambda function</article>

**Precondition**

> <article>- Access to AWS<br>- Permissions to upload something to the `mattermost-apps-bucket-test` S3 bucket in AWS<br>- Current version of the `mattermost-plugin-apps` plugin&nbsp;</article>

### Details

| Name     | Value                                                          |
| :------- | :------------------------------------------------------------- |
| Priority | Normal                                                         |
| Status   | Active                                                         |
| Folder   | Apps Framework / Framework and test apps / Apps AWS Deployment |
| Created  | 2021-04-12T16:38:40Z                                           |

### Steps

<hr/>

**Step 1**

> <article>Set environment variables that will link tour local Mattermost server to the AWS instance<br>1. Open a terminal and navigate to your 'mattermost-server' repo<br>2. Stop your server IF it's running<br>3. Type <em>export MM_APPS_S3_BUCKET=mattermost-apps-assets-bucket-test</em><br>4. Type <em>export APPS_INVOKE_AWS_ACCESS_KEY=&lt;test user's access key&gt;</em><br>5. Type <em>export APPS_INVOKE_AWS_SECRET_KEY==&lt;test user's secret key&gt;</em><br>6. Start your local Mattermost server by typing <em>make run-server MM_FEATUREFLAGS_AppsEnabled=true</em></article>

<hr/>

**Step 2**

> <article>Configure the proxy plugin to register the test app<br>1. Clone down the proxy plugin repo <em>https://github.com/mattermost/mattermost-plugin-apps</em><br>2. Open <em>mattermost-plugin-apps/assets/manifests.json</em><br>3<em>.&nbsp;</em>Ads a record for the app you with to deploy ex: <em>"com.mattermost.servicenow": "0.1.0"</em><br>4. Build the proxy plugin<br><br></article>

<hr/>

**Step 3**

> <article>Start an ngrok tunnel that will expose your local Mattermost server to an external DNS</article>

<hr/>

**Step 4**

> <article>Upload the modified apps plugin<br>1. Navigate to your local and open the plugin settings in the system console<br>2. Upload the plugin build is step 2. - Overwrite the existing version if it's installed<br>3. Ensure the plugin is running</article>

<hr/>

**Step 5**

> <article>Build the app bundles for Service Now<br>1. Clone down the Service Now repo <em>https://github.com/mattermost/mattermost-app-servicenow</em><br>2<em>.&nbsp;</em>Open a terminal and cd into the Service Now directory<br>3. Type <em>make&nbsp;</em>to compile the plugin<br>4. Open the <em>dist </em>folder and ensure<em> bundle.zip&nbsp;</em>is present</article>

<hr/>

**Step 6**

> <article>1. Login to One Login here https://mattermost.onelogin.com/login<br>2. Select AWS and login asa developer<br>3. Locate and select S3 from the services<br>4. Locate the "mattermost-apps-bucket-test" bucket <br>5. Upload the bundle build in step 5.</article>

<hr/>

**Step 7**

> <article>Install the bundle<br>1. Navigate to your local via the ngrok tunnel setup in step 3.<br>2. Type <em>/apps list&nbsp;</em>and ensure <em>com.mattermost.servicenow&nbsp;</em>is listed and the <em>type&nbsp;</em>in the <em>status&nbsp;</em>colum is showing as <em>aws_lambda</em><br>3. type <em>/apps install --app-id &nbsp;com.mattermost.servicenow</em><br><br></article>

<hr/>

### More Info

| Name                     | Value        |
| :----------------------- | :----------- |
| Manual Test Environments | Webapp       |
| Tags                     | Never tested |
| Location                 | Integrations |
