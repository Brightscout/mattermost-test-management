---
# (Required) Ensure all values are filled up
name: "Close DM you're viewing, redirects to last viewed channel"
status: Active
priority: Low
folder: Multi-Team and DMs
authors: ""
team_ownership: 
- Channels

# (Optional) Test type and tools
cypress: Update
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: []

# (Optional)
component: null
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)
location: Multi-Team and DMs
tags: []
labels: 
- Hackfest
- TM4J-Key-Mapped-In-Cypress-Release
- fix-versions-not-empty-2022cleanup

# Do not change
id: 3904507
key: MM-T453
folder_path: channels/multi-team-and-dms
created_on: "2020-01-03T14:24:34Z"
last_updated: ""
case_hashed: e491d46fe3f6123b2365fcb5120a2123116ea2b65084c89f06dd2460c6c2b89e9b688b7d808141de7060a4df9ac63b2c
steps_hashed: 0db61014034277a78ea5cc45212b3b94518a434dbd78fdd64dd9ac5f2f9ae5d1f46fd7f92033f4f12e20cb65a6459bc6
---

## MM-T453: Close DM you're viewing, redirects to last viewed channel

---

**Step 1**

Close DM you're viewing, redirects to last viewed channel\
–––––––––––––––––––––––––

1. View a DM channel
2. In the LHS click the `x` next to the DM you're viewing
3. View another DM channel
4. Click on DM channel header and select "Close Direct Message"

**Expected**

After 2 and 4, DM is removed from the LHS and center channel redirects to last viewed channel

---

**Step 2**

1. Open a DM to view, click on x to close a different DM (not the one you are currently viewing)

**Expected**

- User remains on the same DM
- The other DM is closed

---

**Step 3**

**Note**:This test case (T453) is set to be run on both the Desktop app as well as a browser in mobile view. If you are testing on the Desktop app please pass this step without testing as it doesn't apply to the Desktop app.

1. Open a DM
2. Trim URL to only show root and reload

_Related ticket(s):_

- [keep track of last channels (including DMs) without affecting the close DM action — MM-23065](https://mattermost.atlassian.net/browse/MM-)
- [Reloading root URL sends to wrong DM channel in certain circumstances — MM-25804](https://mattermost.atlassian.net/browse/MM-25804)

**Test Data**

e.g. start with\
[https://community-release.mattermost.com](https://community-release.mattermost.com/core/messages/@jelena) [/core/messages/@](https://community-release.mattermost.com/core/messages/@jelena)username\
delete the last part the URL\
`[/core/messages/@](https://community-release.mattermost.com/core/messages/@jelena)username`\
to be left with only this ⬇ and reload \
[https://community-release.mattermost.com](https://community-release.mattermost.com/core/messages/@jelena)

**Expected**

- User is returned to DM/channel they were viewing after reload and go to root URL.
