---
key: MM-T453
title: Close DM you're viewing, redirects to last viewed channel
---

## MM-T453: Close DM you're viewing, redirects to last viewed channel

### Details

| Name     | Value                                                                          |
| :------- | :----------------------------------------------------------------------------- |
| Priority | Low                                                                            |
| Status   | Active                                                                         |
| Folder   | Channels / Multi-Team and DMs                                                  |
| Labels   | Hackfest,TM4J-Key-Mapped-In-Cypress-Release,fix-versions-not-empty-2022cleanup |
| Created  | 2020-01-03T14:24:34Z                                                           |

### Steps

<hr/>

**Step 1**

> <article>Close DM you're viewing, redirects to last viewed channel<br>–––––––––––––––––––––––––<ol><li>View a DM channel</li><li>In the LHS click the `x` next to the DM you're viewing</li><li>View another DM channel</li><li>Click on DM channel header and select "Close Direct Message"</li></ol></article>

**Expected**

> <article>After 2 and 4, DM is removed from the LHS and center channel redirects to last viewed channel </article>

<hr/>

**Step 2**

> <article><ol><li>Open a DM to view, click on x to close a different DM (not the one you are currently viewing)</li></ol></article>

**Expected**

> <article><ul><li>User remains on the same DM</li><li>The other DM is closed</li></ul></article>

<hr/>

**Step 3**

> <article><strong>Note</strong>:This test case (T453) is set to be run on both the Desktop app as well as a browser in mobile view. If you are testing on the Desktop app please pass this step without testing as it doesn't apply to the Desktop app.<ol><li>Open a DM</li><li>Trim URL to only show root and reload</li></ol></article>

**Test Data**

> <article>e.g. start with<br><a href="https://community-release.mattermost.com/core/messages/@jelena">https://community-release.mattermost.com</a><a href="https://community-release.mattermost.com/core/messages/@jelena">/core/messages/@</a>username<br>delete the last part the URL<br>`<a href="https://community-release.mattermost.com/core/messages/@jelena">/core/messages/@</a>username`<br>to be left with only this ⬇ and reload&nbsp;<br><a href="https://community-release.mattermost.com/core/messages/@jelena">https://community-release.mattermost.com</a></article>

**Expected**

> <article><ul><li><p data-pm-slice='1 1 ["bulletList",null,"listItem",null]'>User is returned to DM/channel they were viewing after reload and go to root URL.</p></li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.23 (May 2020),v5.26 (August 2020) |
| Related ticket(s) | <ul><li><a href="https://mattermost.atlassian.net/browse/MM-">keep track of last channels (including DMs) without affecting the close DM action — MM-23065</a></li><li><a href="https://mattermost.atlassian.net/browse/MM-25804">Reloading root URL sends to wrong DM channel in certain circumstances — MM-25804</a></li></ul> |

<hr/>

### More Info

| Name              | Value                                              |
| :---------------- | :------------------------------------------------- |
| Priority P1 to P4 | P3 - Deep Functions (Do extensive scenarios work?) |
| Rainforest        | N/A                                                |
| Team Ownership    | Channels                                           |
| Cypress           | Update                                             |
| Location          | Multi-Team and DMs                                 |
