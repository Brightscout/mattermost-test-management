{
  "id": 6308707,
  "key": "MM-T3152",
  "name": "RN apps: More Messages banner and New Messages line",
  "createdOn": "2020-07-22T21:18:24Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["1.42-p123", "messaging", "fix-versions-not-empty-2022cleanup"],
  "component": null,
  "priority": { "id": 401951, "name": "Low" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 404292,
    "name": "Messaging",
    "parentId": 3142963,
    "fullNames": ["Channels", "Messaging"],
    "fullPath": "channels/messaging"
  },
  "customFields": {
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": "P3 - Deep Functions (Do extensive scenarios work?)",
    "Update notes": "21 Sep 10 - (LI) Marked as N/A for Rainforest as not able to test push notifications in RF",
    "Rainforest": ["N/A"],
    "Team Ownership": ["Channels"],
    "Manual Test Environments": ["Mobile"],
    "Detox": "N/A",
    "Cypress": "N/A",
    "MMCTL": null,
    "Last Updated": "",
    "Tags": [],
    "Location": "Messaging"
  },
  "steps": [
    {
      "inline": {
        "description": "RN apps: More Messages banner and New Messages line<br />–––––––––––––––––––––––––<ol><li>As user 1, launch the mobile app.</li><li>Go to a channel where you can be mentioned.</li><li>Exit the app (<strong>close app, not just minimize – </strong><strong>swipe up from the bottom of the screen and pause slightly in the middle of the screen, then swipe up to close</strong>)</li><li>As user 2, post enough messages to the channel in step 2 so that when user 1 returns to that channel the first unread message will be outside the viewable area.</li><li>As user 2, mention user 1 in this same channel.</li><li>As user 1, tap on the received push notification.</li><li>Expected: As user 1 lands on the channel, the More Messages button may appear momentarily and animate away (if it appears and stays, it's fine).</li><li>As user 1, scroll up enough above the currently viewable screen, then mark another message as unread and exit the app.</li><li>As user2, mention user 1 in this same channel.</li><li>As user 1, tap on the received push notification.</li><li>Expected: The More Messages button is shown with the correct unread count.</li></ol>",
        "testData": null,
        "expectedResult": "<ul><li>When a user opens any channel, user is always landed at the bottom of the channel</li><li>If the channel is unread when opened and the New Messages line is on the screen (in the visible area), More Messages banner/button is not shown at all </li><li>If there are unread messages beyond the visible area, More Messages banner/button with a count of TOTAL unread messages. e.g. \"XX new messages\" is shown</li><li>Tapping the banner/button should scroll the user to the oldest rendered post, and the banner count should update depending on how many MORE un-reads are above that location. The banner should read \"XX more new messages\"</li><li>As soon as the \"New Messages\" line is visible on the screen, the banner should hide (animate away)</li></ul>",
        "customFields": {
          "Fix Versions": ["v1.34 Mobile (August 2020)", "Open", "Triage"],
          "Related ticket(s)": "<ul><li><a href=\"https://mattermost.atlassian.net/browse/MM-23761\">Fix scroll jumpiness by always landing users at the bottom of the channel when opening an unread channel — MM-23761</a></li><li><a href=\"https://mattermost.atlassian.net/browse/MM-26855\">RN: More Messages button inconsistencies when opening the app from a push notification — MM-26855</a></li><li><a href=\"https://mattermost.atlassian.net/browse/MM-27483\">RN IOS: New messages toast is missing if landing on to a the channel with unreads — MM-27483</a></li><li>(<span style=\"color:rgb(184, 49, 47)\">Invalid</span>) <a href=\"https://mattermost.atlassian.net/browse/MM-31150\">RN: New Messages banner does not persist on tapping a push notification — MM-31150</a></li><li><a href=\"https://mattermost.atlassian.net/browse/MM-31766\">RN iPad: New Messages banner disappears immediately when viewing channel from push notification — MM-31766</a></li></ul>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    },
    {
      "inline": {
        "description": "Should still display New Messages line after app relaunch<br />–––––––––––––––––––––––––<br /><ol><li>On a channel, in the visible area, mark a post unread</li><li>Close the app then relaunch it</li></ol>",
        "testData": null,
        "expectedResult": "<ul><li>On app relaunch user is back at the channel from step 2 and the New Messages line should still display.</li></ul>",
        "customFields": {
          "Fix Versions": ["v1.34 Mobile (August 2020)", "v1.38 Mobile (December 2020)"],
          "Related ticket(s)": "<ul><li><a href=\"https://mattermost.atlassian.net/browse/MM-25766\">RN: Messages are not being marked as read — MM-25766</a></li><li><a href=\"https://mattermost.atlassian.net/browse/MM-29381\">RN Android: App frequently fails to load channels for initial team — MM-29381</a></li><li>(<span style=\"color:rgb(184, 49, 47)\">Duplicate </span>of MM-29381) <a href=\"https://mattermost.atlassian.net/browse/MM-29382\">RN Android: Different post options than on iOS — MM-29382</a></li><li>(<span style=\"color:rgb(184, 49, 47)\">Invalid</span>) <a href=\"https://mattermost.atlassian.net/browse/MM-31151\">RN: \"New Messages\" line does not go away on closing and reopening the app — MM-31151</a></li></ul>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "b619b1fa628d6cf256382045d2b5daaeadcbc39adf439d41af68bfbf8308b6850844126943bad3a9b889818a844a1587",
  "stepsHashed": "bb4b2199001c258f6f90cea9be82d824e6cdb344cfe2a52b42f7f15054f88d665eb982ec8d06f2dc68d1d3fa7758ea16"
}
