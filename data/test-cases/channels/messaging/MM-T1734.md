---
key: MM-T1734
title: Code blocks highlight as expected
---

## MM-T1734: Code blocks highlight as expected

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Normal               |
| Status   | Active               |
| Folder   | Channels / Messaging |
| Labels   | messaging            |
| Created  | 2020-04-29T14:06:39Z |

### Steps

<hr/>

**Step 1**

> <article><strong>Typescript code:</strong><br /><ol><li>Post 3 code blocks listed in the test data section</li></ol></article>

**Test Data**

> <article>```ts<br />const message: string = 'hello world';<br />console.log(message);<br />```<br /><strong><em>and</em></strong><br /><br />```tsx<br />const message: string = 'hello world';<br />console.log(message);<br />```<br /><br /><strong><em>and</em></strong><br /><br />```typescript<br />const message: string = 'hello world';<br />console.log(message);<br />```</article>

**Expected**

> <article><ul><li><p>Verify TypeScript syntax highlighting is present (see images below)</p></li></ul><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1588168937566-Screen+Shot+2020-04-29+at+10.00.41+AM.png" style="width:468px" class="fr-fil fr-dib" /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1588168951513-Screen+Shot+2020-04-29+at+10.01.06+AM.png" style="width:467px" class="fr-fil fr-dib" /></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.24 (June 2020) |
| Related ticket(s) | (<strong><span style="color:rgb(65, 168, 95)">Story</span></strong>) <a href="https://mattermost.atlassian.net/browse/MM-24508">Typescript support for code highlighting — MM-24508</a> |

<hr/>

**Step 2**

> <article><strong>Postgres syntax highlight:</strong><br /><ul><li>Post 3 code blocks listed in the test data section</li></ul></article>

**Test Data**

> <article>```postgres<br />CREATE OR REPLACE FUNCTION snitch() RETURNS event_trigger AS $$<br />BEGIN<br />RAISE NOTICE 'snitch: % %', tg_event, tg_tag;<br />END;<br />$$ LANGUAGE plpgsql;<br /><br />CREATE EVENT TRIGGER snitch ON ddl_command_start EXECUTE PROCEDURE snitch();<br />```<br /><strong><em>and</em></strong><br /><br />```pgsql<br />CREATE OR REPLACE FUNCTION snitch() RETURNS event_trigger AS $$<br />BEGIN<br />RAISE NOTICE 'snitch: % %', tg_event, tg_tag;<br />END;<br />$$ LANGUAGE plpgsql;<br /><br />CREATE EVENT TRIGGER snitch ON ddl_command_start EXECUTE PROCEDURE snitch();<br />```<br /><strong><em>and</em></strong><br /><br />```postgresql<br />CREATE OR REPLACE FUNCTION snitch() RETURNS event_trigger AS $$<br />BEGIN<br />RAISE NOTICE 'snitch: % %', tg_event, tg_tag;<br />END;<br />$$ LANGUAGE plpgsql;<br /><br />CREATE EVENT TRIGGER snitch ON ddl_command_start EXECUTE PROCEDURE snitch();<br />```<br /><br /></article>

**Expected**

> <article><ul><li>Verify PostgreSQL &amp; PL/pgSQL syntax highlighting (see images below)<br /><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1592250553067-1592250553067.png" class="fr-fic fr-dii" /><br /><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1592250582975-1592250582975.png" class="fr-fic fr-dii" /></li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.26 (August 2020) |
| Related ticket(s) | <ul><li><a href="https://mattermost.atlassian.net/browse/MM-25386">Add support for PostgreSQL &amp; PL/pgSQL syntax highlighting — MM-25386</a></li><li><a href="https://mattermost.atlassian.net/browse/MM-31179">Issue with PostgreSQL &amp; PL/pgSQL syntax highlighting — MM-31179</a></li></ul> |

<hr/>

**Step 3**

> <article><p>Set the Enable Latex Rendering to true, then try to post the sample text provided with the following suffixes:</p><ol><li>texcode</li><li>latexcode</li></ol></article>

**Test Data**

> <article>```texcode<br />\documentclass{article}<br /><br />\begin{document}<br /><br />Hello World!<br /><br />\end{document}<br />```<br /><br />AND/OR <br /><br />```latexcode<br />\documentclass{article}<br /><br />\begin{document}<br /><br />Hello World!<br /><br />\end{document}<br />```</article>

**Expected**

> <article>The sample text should post and is properly syntax-highlighted<br /><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1601595239432-Screen+Shot+2020-10-01+at+7.33.01+PM.png" style="width:300px" class="fr-fil fr-dib" /></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Related ticket(s) | https://mattermost.atlassian.net/browse/MM-25668 |

<hr/>

**Step 4**

> <article><strong>Python syntax highlight:</strong><br /><br /><ol><li>Paste the sample code<br />```python<br />op.execute("""<br />UPDATE events.settings<br />SET name = 'paper_review_conditions'<br />WHERE module = 'editing' AND name = 'review_conditions' """)<br /> ```</li><li>Paste sample code file and click on to open in preview </li></ol></article>

**Test Data**

> <article><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524404360-Screen+Shot+2020-10-12+at+1.38.31+PM.png" style="width:300px" class="fr-fil fr-dib" /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524384147-Screen+Shot+2020-10-12+at+1.39.17+PM.png" style="width:300px" class="fr-fil fr-dib" /><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602524700769-1602524700769.png" style="width:300px" class="fr-fic fr-fil fr-dib" /></article>

**Expected**

> <article>1. Verify line numbers line up with the text in the code block and are not selectable; There should be no extra lines<br />Term appears correctly in search results when highlighted<br /><br />2. Line numbers line up with text in preview of a code file attachment.</article>

<hr/>

**Step 5**

> <article><strong>sh sytax formating:</strong><br />____________________<ul><li>Post a sample code<br />```sh<br />find /path/to/whatever -type f | sed "1,$MAX_FILES d' | while read fn; do<br />echo "deleting $fn"<br />rm -f $fn<br />done<br />```</li></ul></article>

**Test Data**

> <article><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1602525351396-1602525351396.png" style="width:300px" class="fr-fic fr-fil fr-dib" /></article>

**Expected**

> <article><ul><li>Verify there should be no missing spaces or extra empty lines added to the code </li></ul></article>

<hr/>

**Step 6**

> <article>added support for extension .bsl, .os (OneScript oscript.io) 1C: Enterprise syntax highlighting<br /><ul><li>Post a sample code<br />```bls<br />find /path/to/whatever -type f | sed "1,$MAX_FILES d' | while read fn; do<br />echo "deleting $fn"<br />rm -f $fn<br />done<br />```</li></ul><br /><br /></article>

**Expected**

> <article>Verify syntax highlighting <br /><br /></article>

<hr/>

### More Info

| Name              | Value                                                       |
| :---------------- | :---------------------------------------------------------- |
| Fix Versions      | v5.24 (June 2020),v5.26 (August 2020),v5.28 (October 2020)  |
| Priority P1 to P4 | P2 - Core Functions (Do core functions work?)               |
| Update notes      | Test case updated to add 1C Enterprise syntax highlighting. |
| Rainforest        | N/A,Evaluating                                              |
| Team Ownership    | Channels                                                    |
| Detox             | N/A                                                         |
| Cypress           | Update                                                      |
| MMCTL             | N/A                                                         |
| Selenium          | N/A                                                         |
| Location          | Messaging                                                   |
