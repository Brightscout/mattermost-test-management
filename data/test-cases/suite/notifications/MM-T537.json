{
  "id": 3905605,
  "key": "MM-T537",
  "name": "Mobile Push Notifications - Notification clears after reading the message on desktop",
  "createdOn": "2020-01-03T19:25:51Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["1.42-p123", "notifications"],
  "component": null,
  "priority": { "id": 401951, "name": "Low" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 404296,
    "name": "Notifications",
    "parentId": 2954447,
    "fullNames": ["Suite", "Notifications"],
    "fullPath": "suite/notifications"
  },
  "customFields": {
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": "P3 - Deep Functions (Do extensive scenarios work?)",
    "Update notes": "21 Sep 8 - Not able to test push notifications if RF",
    "Rainforest": ["N/A"],
    "Team Ownership": ["Channels"],
    "Manual Test Environments": ["Mobile"],
    "Detox": null,
    "Cypress": "N/A",
    "MMCTL": null,
    "Last Updated": "",
    "Tags": [],
    "Location": "Notifications"
  },
  "steps": [
    {
      "inline": {
        "description": "Mobile Push Notifications - Notification clears after reading the message on desktop<br>--------------------<br>FIRST, ensure that your MM app has not been suspended by the OS, nor has it been force-quit. Bring the app to the foreground and interact with it, then put it in the background again.<br><br>1. User A logs in on mobile device and also on desktop, ensure notification settings are set to receive push notifications (check your status to be sure, as above tests)<br>2. User A puts app in background on mobile device<br>3. User B mentions User A in a channel User A is NOT viewing on desktop<br>4. User A gets push notification on mobile app<br>5. User A then views on desktop the channel/DM they were mentioned in",
        "testData": "More background from Elias about iOS suspending apps or apps having been force-quit, from MM-33642:<br><br><p data-renderer-start-pos=\"1\">If I let the OS kill the app, then at times the notification is not cleared, same happens if I force-quit the app. This two last cases are to be expected not to clear the notification. As of the Apple documentation:</p><p data-renderer-start-pos=\"440\"><a data-renderer-mark=\"true\" href=\"https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/pushing_background_updates_to_your_app?language=objc\" title=\"https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/pushing_background_updates_to_your_app?language=objc\">Pushing Background Updates to Your App</a></p><blockquote><p data-renderer-start-pos=\"481\">Important</p><p data-renderer-start-pos=\"492\">The system treats background notifications as low priority: you can use them to refresh your app’s content, but the system doesn’t guarantee their delivery. In addition, the system may throttle the delivery of background notifications if the total number becomes excessive. The number of background notifications allowed by the system depends on current conditions, but don’t try to send more than two or three per hour.</p></blockquote><p data-renderer-start-pos=\"915\"><a data-renderer-mark=\"true\" href=\"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc\" title=\"https://developer.apple.com/documentation/uikit/uiapplicationdelegate/1623013-application?language=objc\">application:didReceiveRemoteNotification:fetchCompletionHandler:</a></p><blockquote><p data-renderer-start-pos=\"982\">Use this method to process incoming remote notifications for your app. Unlike the <span data-renderer-mark=\"true\">application:didReceiveRemoteNotification:</span> method, which is called only when your app is running in the foreground, the system calls this method when your app is running in the foreground or background. In addition, if you enabled the remote notifications background mode, the system launches your app (or wakes it from the suspended state) and puts it in the background state when a remote notification arrives. However, the system does not automatically launch your app if the user has force-quit it. In that situation, the user must relaunch your app or restart the device before the system attempts to launch your app automatically again.</p></blockquote>",
        "expectedResult": "Notification should be cleared from mobile device after step 5.",
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "087d14720ed5a8562effc9fdd69dbfef50fb68f9d80f6ee1f18d34165dcc6d2e9ac8e96a4da0438e547fd54ee9dc422e",
  "stepsHashed": "504f78b9d40c5d01c9be4ed0367e8c184e07705e5e8a94f9943e24f3ad49402b59f3ff6fa1029aae6773d5e14a231574"
}
