---
key: MM-T2817
title: Don't remove bots from teams and channels when doing LDAP groups removals
---

## MM-T2817: Don't remove bots from teams and channels when doing LDAP groups removals

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Low                  |
| Status   | Active               |
| Folder   | Suite / AD LDAP      |
| Labels   | ldap                 |
| Created  | 2020-06-02T20:03:49Z |

### Steps

<hr/>

**Step 1**

> <article>Don't remove bots from teams and channels when doing LDAP groups removals<br>————————————————————————————<br>Add a bot to a group-constrained team or channel and ensure that, while other user accounts are removed from the team or channel, bot accounts do not get removed.<ol><li>Create bot account (enable bot accounts in System Console ➜ Integrations ➜ Features, then create bot account in main menu ➜ Integrations)</li><li> Create a private channel</li><li> Add the bot account to the private channel (channel drop-down ➜ Add Members to Channel, or use the link in the channel intro text)</li><li> Also add another user to the private channel who is not in the LDAP group you're going to link it to</li><li> System admin link an LDAP group to the channel (can sync LDAP here if curious who is added; no one would be removed b/c not constrained yet)</li><li> In CLI, enable group-constraint for the channel</li><li> Verify before LDAP sync that users including the bot were not removed</li><li>Sync LDAP</li></ol></article>

**Expected**

> <article><ul><li>Other user you added (step 4) was removed from the channel</li><li>Bot account is still in the channel<br><br></li></ul><strong>Summary</strong>: Users in the group are added / remain in the channel. Users not in the group are removed from the channel, except for bot accounts. They stay even though they're not in an LDAP group</article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.12 (June 2019) |
| Related ticket(s) | &nbsp;(<strong><span style="color: rgb(65, 168, 95);">Story</span></strong>)&nbsp;<a href="https://mattermost.atlassian.net/browse/MM-15261">Don't remove bots from teams and channels when doing LDAP groups removals — MM-15261</a> |

<hr/>

### More Info

| Name                     | Value                                              |
| :----------------------- | :------------------------------------------------- |
| Fix Versions             | v5.12 (June 2019)                                  |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?) |
| Rainforest               | N/A                                                |
| Team Ownership           | Suite Users                                        |
| Manual Test Environments | Desktop,Webapp                                     |
| Cypress                  | To Do                                              |
| Location                 | AD LDAP                                            |
