---
# (Required) Ensure all values are filled up
name: "Check for Ignore Guest Users when Synchronizing with AD/LDAP"
status: Active
priority: Smoke test
folder: AD LDAP
authors: ""
team_ownership: 
- Suite Users

# (Optional) Test type and tools
cypress: null
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: 
- Webapp

# (Optional)
component: System Console
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)
location: AD LDAP
tags: 
- Never tested
labels: 
- ldap
- fix-versions-not-empty-2022cleanup

# Do not change
id: 7544905
key: MM-T3420
folder_path: suite/ad-ldap
created_on: "2020-10-20T16:47:52Z"
last_updated: ""
case_hashed: e5fe01298f806c54bec9ff5fdc54d0e0b8030983e13d2d43c5d4a119dbdb049dca5b3cce73c0f6e1770c1bf414ea6284
steps_hashed: ce1421535d3e42429c09803b95e3a65f28a0010fa7f136b4a7babf1e33674318dd27c6fdd821fb1476306667006bb03b
---

## MM-T3420: Check for Ignore Guest Users when Synchronizing with AD/LDAP

---

**Step 1**

**Setup ADFS and LDAP with following configurations:**\
\
\*\*ADFS - \*\*\
1\. ADFS setup in Active Directory (adfs.e2etest.dev.spinmint.com)\
2\. SAML needs to be setup with ADFS. (https\://docs.mattermost.com/deployment/sso-saml-adfs-msws2016.html)\
2a. Set "Enable Synchronizing SAML Accounts with AD/LDAP" = true\
2b. Set "Ignore Guest Users when Synchronizing with AD/LDAP" = true\
2c. Set "Guest Filter" = Username=\*guest\* 2b. Set "Id Attribute" = "objectGUID"\
3\. Mattermost must be running in SSL. (https\://docs.mattermost.com/install/config-tls-mattermost.html)\
\
\*\*LDAP - \*\*\
1\. AD/LDAP setup in Active Directory (adfs.e2etest.dev.spinmint.com)\
2\. LDAP needs to be setup in Mattermost (https\://docs.mattermost.com/deployment/sso-ldap.html)\
2a. Set "Enable Synchronization with AD/LDAP" = true 2b.\
Set "ID Attribute" = "objectGUID"\
2c. Set "User Filter" = "(sn=user)"\
\
\
**Test Steps:**\
1\. Once both systems are setup and working independently, Test SAML Login by logging in as a user containing the username guest in it. For example: samlguest-1 or samlguest-2\
2\. Go to LDAP, run LDAP Sync. - Ensure Guest User was not deactivated.\
\
Repeat the above steps by setting the config "Ignore Guest Users when Synchronizing with AD/LDAP" to false in SAML configuration page and verify that Guest User gets deactivated when LDAP Sync is run

**Expected**

- If the config "Ignore Guest Users when Synchronizing with AD/LDAP" is set to True, then Guest User should not be deactivated when LDAP Sync is complete. 
- If the config "Ignore Guest Users when Synchronizing with AD/LDAP" is set to False, then Guest User should be deactivated when LDAP Sync is complete.
