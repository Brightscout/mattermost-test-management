---
key: MM-T3420
title: Check for Ignore Guest Users when Synchronizing with AD/LDAP
---

## MM-T3420: Check for Ignore Guest Users when Synchronizing with AD/LDAP

### Details

| Name      | Value                                   |
| :-------- | :-------------------------------------- |
| Priority  | Smoke test                              |
| Status    | Active                                  |
| Folder    | Suite / AD LDAP                         |
| Component | System Console                          |
| Labels    | ldap,fix-versions-not-empty-2022cleanup |
| Created   | 2020-10-20T16:47:52Z                    |

### Steps

<hr/>

**Step 1**

> <article><strong>Setup ADFS and LDAP with following configurations:</strong><br><br><strong>ADFS -&nbsp;</strong><br>1. ADFS setup in Active Directory (adfs.e2etest.dev.spinmint.com)<br>2. SAML needs to be setup with ADFS. (https://docs.mattermost.com/deployment/sso-saml-adfs-msws2016.html)<br>2a. Set "Enable Synchronizing SAML Accounts with AD/LDAP" = true<br>2b. Set "Ignore Guest Users when Synchronizing with AD/LDAP" = true<br>2c. Set "Guest Filter" = Username=*guest* 2b. Set "Id Attribute" = "objectGUID"<br>3. Mattermost must be running in SSL. (https://docs.mattermost.com/install/config-tls-mattermost.html)<br><br><strong>LDAP -&nbsp;</strong><br>1. AD/LDAP setup in Active Directory (adfs.e2etest.dev.spinmint.com)<br>2. LDAP needs to be setup in Mattermost (https://docs.mattermost.com/deployment/sso-ldap.html)<br>2a. Set "Enable Synchronization with AD/LDAP" = true 2b.<br>Set "ID Attribute" = "objectGUID"<br>2c. Set "User Filter" = "(sn=user)"<br><br><br><strong>Test Steps:</strong><br>1. Once both systems are setup and working independently, Test SAML Login by logging in as a user containing the username guest in it. For example: samlguest-1 or samlguest-2<br>2. Go to LDAP, run LDAP Sync.

- Ensure Guest User was not deactivated.<br><br>Repeat the above steps by setting the config "Ignore Guest Users when Synchronizing with AD/LDAP" to false in SAML configuration page and verify that Guest User gets deactivated when LDAP Sync is run<br><br><br></article>

**Expected**

> <article><ul><li>If the config "Ignore Guest Users when Synchronizing with AD/LDAP" is set to True, then Guest User should not be deactivated when LDAP Sync is complete.&nbsp;</li><li>If the config "Ignore Guest Users when Synchronizing with AD/LDAP" is set to False, then Guest User should be deactivated when LDAP Sync is complete.&nbsp;</li></ul></article>

<hr/>

### More Info

| Name                     | Value                                              |
| :----------------------- | :------------------------------------------------- |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?) |
| Rainforest               | N/A                                                |
| Team Ownership           | Suite Users                                        |
| Manual Test Environments | Webapp                                             |
| Tags                     | Never tested                                       |
| Location                 | AD LDAP                                            |
