{
  "id": 5600880,
  "key": "MM-T2731",
  "name": "With the ID Attribute set - ID Attribute does not match",
  "createdOn": "2020-06-01T17:46:27Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["ldap", "fix-versions-not-empty-2022cleanup"],
  "component": null,
  "priority": { "id": 401950, "name": "Normal" },
  "status": { "id": 401946, "name": "Draft" },
  "folder": {
    "id": 404269,
    "name": "AD LDAP",
    "parentId": 2954447,
    "fullNames": ["Suite", "AD LDAP"],
    "fullPath": "suite/ad-ldap"
  },
  "customFields": {
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": null,
    "Update notes": "",
    "Rainforest": ["N/A"],
    "Team Ownership": ["Suite Users"],
    "Manual Test Environments": [],
    "Detox": null,
    "Cypress": "To Do",
    "MMCTL": null,
    "Last Updated": "",
    "Tags": [],
    "Location": "AD LDAP"
  },
  "steps": [
    {
      "inline": {
        "description": "With the ID Attribute set - ID Attribute does not match<br>————————————————————————————<br><strong>SAML settings</strong>:<ul><li>Sync with LDAP = true</li><li>Override SAML bind data = true</li><li>Enter Id Attribute (e.g. idAttr) - in this case, we are using String.substringBefore(user.login, \"@\") (see below)</li><li>Save<br><br></li></ul><strong>Configure in OKTA to expose ID Attribute (Applications)</strong><ul><li>ATTRIBUTE STATEMENTS</li><li>&nbsp;Name idAttr</li><li>Value user.login</li></ul><br>Our idAttr in SAML is Test.One and in LDAP is Test.One<br>that won't work b/c it's being parsed from email address<br><br>Tricky way to solve just for testing this specific setup: Set idAttr in SAML to user.firstName<br><br>Run LDAP sync (1 updated)<br>Log out the first SAML user and click to log back in via SAML (this user has diff first name in OKTA vs. LDAP, and the email address is therefore already in use)",
        "testData": null,
        "expectedResult": "<ul><li>Error</li></ul>An account with that username already exists. Please contact your Administrator<br><br>(This is where the new feature is working. It protects the old account, and then the system admin can go into Mm if they want to, and remove the collision there)",
        "customFields": {
          "Fix Versions": ["v5.3 (September 2018)"],
          "Related ticket(s)": "<a href=\"https://mattermost.atlassian.net/browse/MM-10532\">Make new LDAP login ID attribute to also work for SAML with LDAP sync — MM-10532</a>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "199d43530e4b1fac98976dbd1f5277ee840fa91bd539563de1c9644644b5589582d8572de76f388f585fb0cf3eacde20",
  "stepsHashed": "cdffd493770051137ea3d884b26a6121342013f7c39459010ccb855a6a6585f876ba0d16602fe80792e85730c1ef28c9"
}
