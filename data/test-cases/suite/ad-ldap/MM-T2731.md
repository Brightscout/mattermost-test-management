---
# (Required) Ensure all values are filled up
name: "With the ID Attribute set - ID Attribute does not match"
status: Draft
priority: Normal
folder: AD LDAP
authors: ""
team_ownership: 
- Suite Users

# (Optional) Test type and tools
cypress: To Do
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: []

# (Optional)
component: null
priority_p1_to_p4: null
location: AD LDAP
tags: []
labels: 
- ldap
- fix-versions-not-empty-2022cleanup

# Do not change
id: 5600880
key: MM-T2731
folder_path: suite/ad-ldap
created_on: "2020-06-01T17:46:27Z"
last_updated: ""
case_hashed: b12735e033f43072684a69453f2e4d11e466e416a147e29df8cc437576d8b2ded9c6defb66716ca5e6fb52530a7731c2
steps_hashed: 8f75b6de009a66a276bf8232736173e41239803092d1b044417fa947db752d327898e8ac7600d152a63b9d55ca91e1d0
---

## MM-T2731: With the ID Attribute set - ID Attribute does not match

---

**Step 1**

With the ID Attribute set - ID Attribute does not match\
————————————————————————————\
**SAML settings**:

- Sync with LDAP = true
- Override SAML bind data = true
- Enter Id Attribute (e.g. idAttr) - in this case, we are using String.substringBefore(user.login, "@") (see below)
- Save

**Configure in OKTA to expose ID Attribute (Applications)**

- ATTRIBUTE STATEMENTS
-  Name idAttr
- Value user.login

Our idAttr in SAML is Test.One and in LDAP is Test.One\
that won't work b/c it's being parsed from email address\
\
Tricky way to solve just for testing this specific setup: Set idAttr in SAML to user.firstName\
\
Run LDAP sync (1 updated)\
Log out the first SAML user and click to log back in via SAML (this user has diff first name in OKTA vs. LDAP, and the email address is therefore already in use)

_Related ticket(s):_

[Make new LDAP login ID attribute to also work for SAML with LDAP sync — MM-10532](https://mattermost.atlassian.net/browse/MM-10532)

**Expected**

- Error

An account with that username already exists. Please contact your Administrator\
\
(This is where the new feature is working. It protects the old account, and then the system admin can go into Mm if they want to, and remove the collision there)
