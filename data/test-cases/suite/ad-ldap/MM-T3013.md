---
key: MM-T3013
title: User attributes are pulled from LDAP or SAML depending on SAML/LDAP sync
---

## MM-T3013: User attributes are pulled from LDAP or SAML depending on SAML/LDAP sync

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Low                  |
| Status   | Active               |
| Folder   | Suite / AD LDAP      |
| Labels   | ldap                 |
| Created  | 2020-07-09T08:37:54Z |

### Steps

<hr/>

**Step 1**

> <article><strong></strong><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest<br>2. Log into OKTA as admin and Jumpcloud as admin<br>3. Observe a user in both (test.one or test.two), ensure:<br>- neither OKTA nor LDAP user is already on the server<br>- email addresses match in OKTA and LDAP<br>- first and last names are different in OKTA vs. LDAP<br>- in OKTA there are some uppercase letters in username and email address<br>e.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP<br><br>4. In rctesting, set SAML &gt; Enable Synchronizing SAML Accounts With AD/LDAP to false<br>5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user<br>6. Verify first/last name in Account Settings is from OKTA<br>7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA<br><br></span></article>

**Expected**

> <article>With SAML-LDAP sync off, user's attributes are pulled from SAML.</article>

<hr/>

**Step 2**

> <article><ol><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">As system admin, set SAML to sync with LDAP, then sync LDAP</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">As user in other browser, refresh after sync completes, and verify user info is now from LDAP</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Other user: refresh Mm, verify updated in Account Settings</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Admin: Edit first/last in OKTA, sync LDAP</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 5</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Admin: sync LDAP</span></li><li><span data-sheets-userformat='{"2":897,"3":{"1":0},"10":2,"11":4,"12":0}' data-sheets-value="{&quot;1&quot;:2,&quot;2&quot;:&quot;1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\n2. Log into OKTA as admin and Jumpcloud as admin\n3. Observe a user in both (test.one or test.two), ensure:\n- neither OKTA nor LDAP user is already on the server\n- email addresses match in OKTA and LDAP\n- first and last names are different in OKTA vs. LDAP\n- in OKTA there are some uppercase letters in username and email address\ne.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\n\n4. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\n5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\n6. Verify first/last name in Account Settings is from OKTA\n7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA\n8. As system admin, set SAML to sync with LDAP, then sync LDAP\n9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP\n10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP\n11. Other user: refresh Mm, verify updated in Account Settings\n12. Admin: Edit first/last in OKTA, sync LDAP\n13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings\n14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12\n15. Admin: sync LDAP\n16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)&quot;}">Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 3)</span></li></ol></article>

**Expected**

> <article>With SAML-LDAP sync on, user's attributes are pulled from LDAP.<br><br></article>

<hr/>

### More Info

| Name                     | Value                                                                                             |
| :----------------------- | :------------------------------------------------------------------------------------------------ |
| Priority P1 to P4        | P2 - Core Functions (Do core functions work?)                                                     |
| Update notes             | (SA) Steps 2-4 where moved into its own test case: MM-T3664, MM-T3665 and MM-T3666, respectively. |
| Rainforest               | N/A                                                                                               |
| Team Ownership           | Suite Users                                                                                       |
| Manual Test Environments | Desktop,Webapp,Cloud                                                                              |
| Cypress                  | Update                                                                                            |
| Location                 | AD LDAP                                                                                           |
