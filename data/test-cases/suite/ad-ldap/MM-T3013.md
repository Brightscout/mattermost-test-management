---
# (Required) Ensure all values are filled up
name: "User attributes are pulled from LDAP or SAML depending on SAML/LDAP sync"
status: Active
priority: Low
folder: AD LDAP
authors: ""
team_ownership: 
- Suite Users

# (Optional) Test type and tools
cypress: Update
detox: null
mmctl: null
playwright: null
rainforest: 
- N/A
manual_test_environments: 
- Desktop
- Webapp
- Cloud

# (Optional)
component: null
priority_p1_to_p4: P2 - Core Functions (Do core functions work?)
location: AD LDAP
tags: []
labels: 
- ldap

# Do not change
id: 6137096
key: MM-T3013
folder_path: suite/ad-ldap
created_on: "2020-07-09T08:37:54Z"
last_updated: ""
case_hashed: 0bc0b585d190b3fe2d95503cefb1c8f82666089cee64a641eaac7c5979ea2fc0b9c369fabd5e2246704c4066a7c2e83b
steps_hashed: 87dd1499c94cb27faa2503f3f9f2491260b9652a658ebfd412a885649b7459c08ab7c934995ecd8e8a6d501e8178fd8a
---

## MM-T3013: User attributes are pulled from LDAP or SAML depending on SAML/LDAP sync

---

**Step 1**

\*\*\*\*1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest\
2\. Log into OKTA as admin and Jumpcloud as admin\
3\. Observe a user in both (test.one or test.two), ensure:\
\- neither OKTA nor LDAP user is already on the server\
\- email addresses match in OKTA and LDAP\
\- first and last names are different in OKTA vs. LDAP\
\- in OKTA there are some uppercase letters in username and email address\
e.g.: FirstOKTA LastOKTA | Test.One\@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP\
\
4\. In rctesting, set SAML > Enable Synchronizing SAML Accounts With AD/LDAP to false\
5\. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user\
6\. Verify first/last name in Account Settings is from OKTA\
7\. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA

**Expected**

With SAML-LDAP sync off, user's attributes are pulled from SAML.

---

**Step 2**

1. As system admin, set SAML to sync with LDAP, then sync LDAP
2. As user in other browser, refresh after sync completes, and verify user info is now from LDAP
3. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP
4. Other user: refresh Mm, verify updated in Account Settings
5. Admin: Edit first/last in OKTA, sync LDAP
6. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings
7. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 5
8. Admin: sync LDAP
9. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 3)

**Expected**

With SAML-LDAP sync on, user's attributes are pulled from LDAP.
