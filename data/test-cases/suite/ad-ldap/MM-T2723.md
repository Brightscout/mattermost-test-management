---
name: "User's attributes are pulled from LDAP, not SAML(newline)(newline)https://mattermost.atlassian.net/browse/PLT-8201"
status: Draft
priority: Normal
team_ownership: "Suite Users"
---

## MM-T2723: User's attributes are pulled from LDAP, not SAML(newline)(newline)https://mattermost.atlassian.net/browse/PLT-8201

---

**Step 1**

User's attributes are pulled from LDAP, not SAML\
\
https\://mattermost.atlassian.net/browse/PLT-8201\
————————————————————————————

1. Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest

2. Log into OKTA as admin and Jumpcloud as admin

3. Observe a user in both (test.one or test.two), ensure:

   - neither OKTA nor LDAP user is already on the server
   - email addresses match in OKTA and LDAP
   - first and last names are different in OKTA vs. LDAP
   - in OKTA there are some uppercase letters in username and email address\
     e.g.: FirstOKTA LastOKTA | Test.One\@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP

4. In rctesting, set SAML ➜ Enable Synchronizing SAML Accounts With AD/LDAP to false

5. In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user

6. Verify first/last name in Account Settings is from OKTA

7. As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA

8. As system admin, set SAML to sync with LDAP, then sync LDAP

9. As user in other browser, refresh after sync completes, and verify user info is now from LDAP

10. Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP

11. Other user: refresh Mm, verify updated in Account Settings

12. Admin: Edit first/last in OKTA, sync LDAP

13. Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings

14. Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12

15. Admin: sync LDAP

16. Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)

**Expected**

- With SAML-LDAP sync on, user's attributes are pulled from LDAP, not SAML; with it off user's attributes are pulled from SAML
