---
key: MM-T2723
title: User's attributes are pulled from LDAP, not SAML(newline)(newline)https://mattermost.atlassian.net/browse/PLT-8201
---

## MM-T2723: User's attributes are pulled from LDAP, not SAML(newline)(newline)https://mattermost.atlassian.net/browse/PLT-8201

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Normal               |
| Status   | Draft                |
| Folder   | Suite / AD LDAP      |
| Labels   | ldap                 |
| Created  | 2020-06-01T17:46:25Z |

### Steps

<hr/>

**Step 1**

> <article>User's attributes are pulled from LDAP, not SAML<br><br>https://mattermost.atlassian.net/browse/PLT-8201<br>————————————————————————————<ol><li>Set up Jumpcloud LDAP on rctest (info in private repo or secure note in LastPass. Verify OKTA is set up on rctest</li><li>Log into OKTA as admin and Jumpcloud as admin</li><li>Observe a user in both (test.one or test.two), ensure:<ul><li>neither OKTA nor LDAP user is already on the server</li><li>email addresses match in OKTA and LDAP</li><li>first and last names are different in OKTA vs. LDAP</li><li>in OKTA there are some uppercase letters in username and email address<br>e.g.: FirstOKTA LastOKTA | Test.One@mattermost.com in OKTA, and TestLDAP OneLDAP | Test.One in LDAP</li></ul></li><li>In rctesting, set SAML ➜ Enable Synchronizing SAML Accounts With AD/LDAP to false</li><li>In a different browser from where you're logged in as admin on Mattermost, OKTA, and Jumpcloud: click the OKTA login button and enter the OKTA account email address and password for the test user</li><li>Verify first/last name in Account Settings is from OKTA</li><li>As system admin, sync LDAP, back in other browser refresh and verify user info is still from OKTA</li><li>As system admin, set SAML to sync with LDAP, then sync LDAP</li><li>As user in other browser, refresh after sync completes, and verify user info is now from LDAP</li><li>Admin: Edit first/last in LDAP (Jumpcloud), sync LDAP</li><li>Other user: refresh Mm, verify updated in Account Settings</li><li>Admin: Edit first/last in OKTA, sync LDAP</li><li>Other user: refresh Mm, verify still LDAP info, no change in names in Account Settings</li><li>Other user: Log out and back in using OKTA, names in Account Settings are now the OKTA values edited in step 12</li><li>Admin: sync LDAP</li><li>Other user: refresh Mm, verify updated back to the LDAP values in Account Settings (as updated in step 10)</li></ol></article>

**Expected**

> <article><ul><li>With SAML-LDAP sync on, user's attributes are pulled from LDAP, not SAML; with it off user's attributes are pulled from SAML</li></ul></article>

<hr/>

### More Info

| Name                     | Value          |
| :----------------------- | :------------- |
| Rainforest               | N/A            |
| Team Ownership           | Suite Users    |
| Manual Test Environments | Desktop,Webapp |
| Cypress                  | To Do          |
| Location                 | AD LDAP        |
