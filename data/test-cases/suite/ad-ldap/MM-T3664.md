---
key: MM-T3664
title: SAML User, Not in LDAP
---

## MM-T3664: SAML User, Not in LDAP

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Normal               |
| Status   | Active               |
| Folder   | Suite / AD LDAP      |
| Labels   | ldap                 |
| Created  | 2021-01-08T08:01:49Z |

### Steps

<hr/>

**Step 1**

> <article>With SAML enabled to sync with LDAP, user exists in SAML but that email address doesn't have an active LDAP account:<br>- Can create new in SAML that doesn't exist yet in LDAP (if there's room in LDAP to add that user there later)<br>- OR can use an existing account but before starting, in Jumpcloud remove the user from all Groups and then from the Jumpcloud Directory (effectively disabling them; the Suspend function in Jumpcloud might not work for this)<br><br>First: Admin ensure SAML is enabled to sync with LDAP, then in another browser (make sure not still logged into OKTA in other browser as previous test.one):<br>1. User who has a SAML account but not an (active) LDAP account clicks the OKTA signin button and creates account in Mattermost using SAML<br>2. System admin syncs LDAP<br>3. User is auto-logged-out. They show as inactive in System Console &gt; Users (They can log back in again using SAML, but they will be deactivated again on any subsequent LDAP sync)<br>4. System admin re-activates or adds them in LDAP (be sure to use same email address as in SAML, and be sure that they are selected as active in Groups &gt; `All Users - LDAP` in Jumpcloud)<br>5. If necessary: User completes LDAP account activation<br>6. User logs back in to Mattermost using SAML and they are successfully reactivated, and exhibit attributes from OKTA<br>7. System admin syncs LDAP<br>8. User is not logged out / deactivated, and shows attributes from LDAP</article>

**Expected**

> <article>After last step, user is not logged out / deactivated, and shows attributes from LDAP</article>

<hr/>

### More Info

| Name                     | Value                                         |
| :----------------------- | :-------------------------------------------- |
| Priority P1 to P4        | P2 - Core Functions (Do core functions work?) |
| Rainforest               | N/A                                           |
| Team Ownership           | Suite Users                                   |
| Manual Test Environments | Webapp                                        |
| Cypress                  | Update                                        |
| Tags                     | Never tested                                  |
| Location                 | AD LDAP                                       |
