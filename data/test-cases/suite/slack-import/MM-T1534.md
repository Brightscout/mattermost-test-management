---
key: MM-T1534
title: Slack Import - All steps
---

## MM-T1534: Slack Import - All steps

**Objective**

> <article>The steps contained in this single test case comprise the entire tab from the old testing spreadsheet.<br>Doing so allows a single person to step through them quickly.</article>

**Precondition**

> <article>Slack Import test files are kept <a href="https://drive.google.com/drive/folders/19y2KC_tcqJZa-BDucvpdmsNdBqy-UL8Q" rel="noopener noreferrer" target="_blank">in Google Drive here</a><br>You will use the above files for the  tests.<br>It is important you have an account on the Slack team before exporting, so you can test claiming a Mattermost account imported from Slack.</article>

### Details

| Name     | Value                |
| :------- | :------------------- |
| Priority | Low                  |
| Status   | Active               |
| Folder   | Suite / Slack Import |
| Created  | 2020-02-20T16:58:54Z |

### Steps

<hr/>

**Step 1**

> <article>Slack Import<br />–––––––––––––––––––––––––<ol><li>Use the Slack Import file generated from the Smarttotem Slack team</li><li>Run it through the slack-advanced-exporter (<a href="https://github.com/grundleborg/slack-advanced-exporter">https://github.com/grundleborg/slack-advanced-exporter</a>) to get the uploaded files and add them to the archive.</li><li>Ensure "Enable integrations to override usernames" is enabled "True" in the Mattermost System Console.</li><li>Import slack file using API,  <br />curl --location<br />--request POST 'http://<strong>{SERVER-URL}</strong>/api/v4/teams/<strong>{TEAM_ID}</strong>/import' \<br />--header 'Authorization: Bearer <strong>{TOKEN}</strong>' \<br />--form 'file=@"<strong>{IMPORT FILE PATH}</strong>"' \<br />--form 'importFrom="slack"' \<br />--form 'filesize="<strong>{FILE SIZE}</strong>"'<br /><br /><strong>Output:</strong>  <code>{"results":"TWF0dGVybW9zdCBTbGFjayBJbXBvcnQgTG9nDQpjaGFubmVscy5qc2 . . . }</code><br /><br /><strong>Note: </strong>Replace values in curly brackets with your data<br /><strong><code>$ ls -l {name-of-file</code>} (will show you the filesize in bytes)</strong><br /><br /></li><li>Decode the result using,<br /><code>curl --location --request GET 'https://httpbin.org/base64/<strong>{RESULT VALUE STEP#4}</strong></code><br /><br /><code><strong>Output: </strong></code><br /><code><strong>Mattermost Slack Import Log<br /><br />Users created:<br />===============<br /><br />The Integration/Slack Bot user with email slackimportuser_b53rtaqwobfkxqpgoueeogzd5e@localhost and password<br />wi5dhjdq87bbfpibff1yr6en4c has been imported.</strong></code><br /><br /><br /><strong><u>Example:</u></strong><br />$ curl --location --request POST 'https://mattermost-server-pr-20144.test.mattermost.cloud/api/v4/teams/pd4dih1x4j837kwtwbb5t3idga/import' \<br />--header 'Authorization: Bearer xoc51zadbprqixhftqfg4owqrw' \<br />--form 'file=@"/Users/furqanmalik/Downloads/import.zip"' \<br />--form 'importFrom="slack"' \<br />--form 'filesize="4659203"'<br /><br />{"results":"TWF0dGVybW9zdCBTbGFjayBJbXBvcnQgTG9nDQpjaGFubmVscy5qc29uIGluIHppcCBhcmNoaXZlIHRvbyBsYXJnZSB0byBwcm9jZXNzIGZvciBTbGFjayBpbXBvcnQNCg0KVXNlcnMgY3JlYXRlZDoNCj09PT09PT09PT09PT09PQ0KDQpUaGUgSW50ZWdyYXRpb24vU2xhY2sgQm90IHVzZXIgd2l0aCBlbWFpbCBzbGFja2ltcG9ydHVzZXJfbjgzZ2dwNTFwaThoZGp1M2FpdGRjZnJvM2NAbG9jYWxob3N0IGFuZCBwYXNzd29yZCB3aHFleGdpdzNicnI5anQzY3NtMTZnNWt3dyBoYXMgYmVlbiBpbXBvcnRlZC4NCg0KQ2hhbm5lbHMgYWRkZWQ6DQo9PT09PT09PT09PT09PT09PQ0KDQoNCk5vdGVzOg0KPT09PT09PQ0KDQotIFNvbWUgbWVzc2FnZXMgbWF5IG5vdCBoYXZlIGJlZW4gaW1wb3J0ZWQgYmVjYXVzZSB0aGV5IHdlcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIGltcG9ydGVyLg0KLSBTbGFjayBib3QgbWVzc2FnZXMgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLg0KLSBBZGRpdGlvbmFsIGVycm9ycyBtYXkgYmUgZm91bmQgaW4gdGhlIHNlcnZlciBsb2dzLg0K"}%<br /><br />$ curl --location --request GET 'https://httpbin.org/base64/TWF0dGVybW9zdCBTbGFjayBJbXBvcnQgTG9nDQpjaGFubmVscy5qc29uIGluIHppcCBhcmNoaXZlIHRvbyBsYXJnZSB0byBwcm9jZXNzIGZvciBTbGFjayBpbXBvcnQNCg0KVXNlcnMgY3JlYXRlZDoNCj09PT09PT09PT09PT09PQ0KDQpUaGUgSW50ZWdyYXRpb24vU2xhY2sgQm90IHVzZXIgd2l0aCBlbWFpbCBzbGFja2ltcG9ydHVzZXJfbjgzZ2dwNTFwaThoZGp1M2FpdGRjZnJvM2NAbG9jYWxob3N0IGFuZCBwYXNzd29yZCB3aHFleGdpdzNicnI5anQzY3NtMTZnNWt3dyBoYXMgYmVlbiBpbXBvcnRlZC4NCg0KQ2hhbm5lbHMgYWRkZWQ6DQo9PT09PT09PT09PT09PT09PQ0KDQoNCk5vdGVzOg0KPT09PT09PQ0KDQotIFNvbWUgbWVzc2FnZXMgbWF5IG5vdCBoYXZlIGJlZW4gaW1wb3J0ZWQgYmVjYXVzZSB0aGV5IHdlcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIGltcG9ydGVyLg0KLSBTbGFjayBib3QgbWVzc2FnZXMgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLg0KLSBBZGRpdGlvbmFsIGVycm9ycyBtYXkgYmUgZm91bmQgaW4gdGhlIHNlcnZlciBsb2dzLg0K<br /><br />Mattermost Slack Import Log<br /><br />Users created:<br />===============<br /><br />The Integration/Slack Bot user with email slackimportuser_b53rtaqwobfkxqpgoueeogzd5e@localhost and password<br />wi5dhjdq87bbfpibff1yr6en4c has been imported.</li></ol></article>

**Expected**

> <article><ul><li>Import should be successful.</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Important notes about this step | Import of LMs file succeeds (does not contain file attachments)<br /><br />LI imported the file in the Google Drive linked above (also no file attachments as that one failed) |

<hr/>

**Step 2**

> <article>Long channel purpose<br />–––––––––––––––––––––––––<ol><li>Join the "files" channel in Mattermost</li><li>Check the channel purpose imported correctly</li></ol></article>

**Expected**

> <article><ul><li>The 250 character channel purpose imported properly (should go until the word "end").</li></ul></article>

<hr/>

**Step 3**

> <article>Channel rename and purpose messages post as system messages<br />–––––––––––––––––––––––––<ol><li>View the "markdown" channel</li></ol></article>

**Expected**

> <article><ul><li>Posts display as system messages:<br />lm-slack [7:12 PM]<br />renamed the channel from "lmtest" to "markdown"</li><li>lindsay brock [7:14 PM]<br />joined #markdown</li><li>sam [7:20 PM]<br />set the channel topic: This is the topic and purpose of this channel.</li></ul></article>

<hr/>

**Step 4**

> <article>Integrations<br />–––––––––––––––––––––––––<ol><li>Go to the "integrations" channel</li><li>Read through the webhook posts in the channel</li></ol></article>

**Expected**

> <article><ul><li>The posts in the channel should match the ones in the Slack channel.</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Important notes about this step | Link previews from import are currently not supported. |

<hr/>

**Step 5**

> <article>Join / Leave Messages<br />–––––––––––––––––––––––––<ol><li>Go to the joinleave channel</li><li>Read through messages</li></ol></article>

**Expected**

> <article><ul><li>Join / leave messages are imported, and match the Mattermost style of System Messages.</li><li>For a user who already exists in a channel, the channel should not be marked as unread.</li></ul></article>

<hr/>

**Step 6**

> <article>Links<br />–––––––––––––––––––––––––<ol><li>Go to the "links" channel</li><li>Check that the links work correctly:<ul><li>email link (ux@mattermost.com)</li><li> website autolinks</li><li> youtube link</li><li> png image link</li><li> gif link</li><li> #channel links should be converted to ~channel</li><li>at-mention links (channel-wide mentions are not expected to link, just highlight)</li></ul></li></ol></article>

**Expected**

> <article><ul><li>The imported links are linked properly.</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Important notes about this step | Link previews from import are currently not supported. |

<hr/>

**Step 7**

> <article>/me Message<br />–––––––––––––––––––––––––<ol><li>Go to the "messages" channel</li><li>At the bottom of the channel, under "/me message", observe the message:<ul><li>sam</li><li>waves hello</li></ul></li></ol></article>

**Expected**

> <article><ul><li>The message should be in italics. </li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Related ticket(s) | (<strong><span style="color:rgb(65, 168, 95)">Story</span></strong>) <a href="https://mattermost.atlassian.net/browse/MM-2594">Add a separate post type for /me messages and update formatting — MM-2954</a> |
| Important notes about this step | The MM-2954 story ticket updated formatting to match other System Message formatting. |

<hr/>

**Step 8**

> <article>Import the same team twice<br />–––––––––––––––––––––––––<ol><li>Create a Mattermost team</li><li>Import a Slack Export into that team</li><li>Check that the Import Summary produced doesn't show any issues</li><li>Check that the channels were created and the imported users were added to them</li><li>Repeat steps 1-4 above on the same server (creating a new Mattermost team, but using the same Slack archive)</li></ol></article>

**Expected**

> <article><ul><li>The second import should be successful.</li></ul></article>

<hr/>

**Step 9**

> <article>Import a Slack Account with a taken email address<br />–––––––––––––––––––––––––<ol><li>The Slack team has an account with the `bot@mattermost.com` address</li><li>Import the Slack team to rc.test server, which has an existing `bot@mattermost.com` account</li></ol></article>

**Expected**

> <article><ul><li>In the import summary, it says the account was merged with the existing account.</li></ul></article>

<hr/>

**Step 10**

> <article>Import Slack users with no email address<br />–––––––––––––––––––––––––<ol><li>Import the "Twalk1team+Slack+export+Feb+9+2017-2.zip" file attached to this test cycle.<br />(right-click the links below and 'Save-as…')</li></ol></article>

**Expected**

> <article><ul><li>For now, users are created with fake email address username@example.com</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Related ticket(s) | <a href="https://mattermost.atlassian.net/browse/MM-5735" rel="noopener noreferrer" target="_blank">Slack import: add support for users who don't have a non-empty email address in Slack — MM-5735</a> |
| Important notes about this step | The email address imported is @localhost |

<hr/>

**Step 11**

> <article>Import Slack channel with name matching deleted Mattermost channel<br />–––––––––––––––––––––––––<ol><li>Create a new Mattermost team with any new channel name.</li><li>Delete the channel.</li><li>In Slack, create a channel with the exact same name.</li><li>Export the Slack team, then import it into Mattermost.</li></ol></article>

**Expected**

> <article><ul><li>New imported channel should have a randomly generated ID as its handle (URL).</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Important notes about this step | Tested archiving one of the imported channels, then importing again and checking the URL of the channel |

<hr/>

### More Info

| Name                     | Value                                           |
| :----------------------- | :---------------------------------------------- |
| Priority P1 to P4        | P4 - Low-Impact (Edge or unsuitable to repeat?) |
| Rainforest               | N/A                                             |
| Team Ownership           | Channels                                        |
| Manual Test Environments | Webapp                                          |
| Detox                    | N/A                                             |
| Cypress                  | N/A                                             |
| Location                 | Slack import                                    |
