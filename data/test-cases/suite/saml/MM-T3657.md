---
key: MM-T3657
title: SAML Login with Keycloak
---

## MM-T3657: SAML Login with Keycloak

### Details

| Name      | Value                              |
| :-------- | :--------------------------------- |
| Priority  | Smoke test                         |
| Status    | Active                             |
| Folder    | Suite / SAML                       |
| Component | System Console                     |
| Labels    | fix-versions-not-empty-2022cleanup |
| Created   | 2020-12-15T16:04:26Z               |

### Steps

<hr/>

**Step 1**

> <article>SAML Login with Keycloak<br>–––––––––––––––––––––––––<ol><li>In the mattermost-server, create a new file named `config.override.mk` and add the following line to it:<br>ENABLED_DOCKER_SERVICES ?= mysql postgres inbucket elasticsearch keycloak`</li><li>Restart the server.</li><li>Visit https://localhost:8484 and login with credentials: (mmuser/mostest)</li><li>Create a new user from Users page.</li><li>Edit SAML Settings in Mattermost.<ul><li>see https://github.com/mattermost/mattermost-server/blob/master/build/docker/keycloak/README.md</li><li>copy SAMLSettings</li><li>Set IDP Public Certificate (https://github.com/mattermost/mattermost-server/blob/master/build/docker/keycloak/keycloak_cert.pem)</li><li>Turn on Encryption and set public/private certificates</li><li>Turn on Sign Request</li></ul></li><li>On the Keycloak Admin portal<ul><li>Go To clients page</li><li>&nbsp;Click on the link for client https://localhost:8065/login/sso/saml</li><li>&nbsp;On the settings tab, turn on the Encrypt Assertions and Client Signature Required and save.</li><li>&nbsp;On the SAML Keys tab, choose the option to Import and then select Certificate PEM</li><li>Import the cert file set in MM Config.</li></ul></li><li>Login with created user using SAML and check if user is logged in successfully</li></ol></article>

**Expected**

> <article><ul><li>SAML User should be logged in from Keycloak successfully</li></ul></article>

<hr/>

### More Info

| Name                     | Value                                         |
| :----------------------- | :-------------------------------------------- |
| Priority P1 to P4        | P2 - Core Functions (Do core functions work?) |
| Team Ownership           | Suite Users                                   |
| Manual Test Environments | Webapp                                        |
| Cypress                  | Evaluating                                    |
| Tags                     | Cloud N/A                                     |
| Location                 | SAML                                          |
