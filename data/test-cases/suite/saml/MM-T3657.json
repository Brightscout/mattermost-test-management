{
  "id": 8232511,
  "key": "MM-T3657",
  "name": "SAML Login with Keycloak",
  "createdOn": "2020-12-15T16:04:26Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["fix-versions-not-empty-2022cleanup"],
  "customFields": {
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": "P2 - Core Functions (Do core functions work?)",
    "Update notes": "",
    "Rainforest": [],
    "Team Ownership": ["Suite Users"],
    "Manual Test Environments": ["Webapp"],
    "Detox": null,
    "Cypress": "Evaluating",
    "MMCTL": null,
    "Last Updated": "",
    "Tags": ["Cloud N/A"],
    "Location": "SAML"
  },
  "componentName": "System Console",
  "priorityName": "Smoke test",
  "statusName": "Active",
  "folderName": "SAML",
  "folderFullPath": "suite/saml",
  "steps": [
    {
      "inline": {
        "description": "SAML Login with Keycloak<br>–––––––––––––––––––––––––<ol><li>In the mattermost-server, create a new file named `config.override.mk` and add the following line to it:<br>ENABLED_DOCKER_SERVICES ?= mysql postgres inbucket elasticsearch keycloak`</li><li>Restart the server.</li><li>Visit https://localhost:8484 and login with credentials: (mmuser/mostest)</li><li>Create a new user from Users page.</li><li>Edit SAML Settings in Mattermost.<ul><li>see https://github.com/mattermost/mattermost-server/blob/master/build/docker/keycloak/README.md</li><li>copy SAMLSettings</li><li>Set IDP Public Certificate (https://github.com/mattermost/mattermost-server/blob/master/build/docker/keycloak/keycloak_cert.pem)</li><li>Turn on Encryption and set public/private certificates</li><li>Turn on Sign Request</li></ul></li><li>On the Keycloak Admin portal<ul><li>Go To clients page</li><li>&nbsp;Click on the link for client https://localhost:8065/login/sso/saml</li><li>&nbsp;On the settings tab, turn on the Encrypt Assertions and Client Signature Required and save.</li><li>&nbsp;On the SAML Keys tab, choose the option to Import and then select Certificate PEM</li><li>Import the cert file set in MM Config.</li></ul></li><li>Login with created user using SAML and check if user is logged in successfully</li></ol>",
        "testData": "",
        "expectedResult": "<ul><li>SAML User should be logged in from Keycloak successfully</li></ul>",
        "customFields": {
          "Fix Versions": [],
          "Related ticket(s)": "",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "6fe0b8e449f453055d196f2b0785810502b291552592e1d3b6d49c2f712002708d6a77719d242ba2edad52ce3a343995",
  "stepsHashed": "d40d53da1a35b681e9c57193f2bda1fd569d32c06d0e093f934d447540565c60d21b48ab31276cb11d02308118e086f7"
}
