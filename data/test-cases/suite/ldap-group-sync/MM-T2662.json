{
  "id": 5566848,
  "key": "MM-T2662",
  "name": "Emal fallback when AuthData in SAML doesn't match user ID in LDAP",
  "createdOn": "2020-05-29T20:22:08Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["ldap-group-sync"],
  "component": null,
  "priority": { "id": 401951, "name": "Low" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 631925,
    "name": "LDAP Group Sync",
    "parentId": 2954447,
    "fullNames": ["Suite", "LDAP Group Sync"],
    "fullPath": "suite/ldap-group-sync"
  },
  "customFields": {
    "Fix Versions": ["v5.14 (August 2019)"],
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": "P3 - Deep Functions (Do extensive scenarios work?)",
    "Update notes": "",
    "Rainforest": ["Evaluating"],
    "Cypress Reports": null,
    "Team Ownership": ["Suite Users"],
    "Manual Test Environments": ["Desktop", "Webapp"],
    "Detox": null,
    "Cypress": "Ticket Open",
    "MMCTL": null,
    "Last Updated": "",
    "Selenium": null,
    "Tags": ["Never tested"],
    "Location": "LDAP Group Sync"
  },
  "steps": [
    {
      "inline": {
        "description": "Emal fallback when AuthData in SAML doesn't match user ID in LDAP<br>————————————————————————————<ol><li>Configure SAML login with LDAP sync where the AuthData value set by SAML is different from the configured LDAP user ID attribute. However, the email field as set by SAML matches the configured LDAP email value.</li><li>Add user to some groups in LDAP.</li><li>Link a group.</li><li>Sync.</li><li><strong>Expected</strong>: User is added to the group in Mattermost in spite of the LDAP user ID attribute being different from the AuthData value because it has used the email as a fallback lookup.</li></ol><br><span style=\"color: rgb(184, 49, 47);\">Perform steps 1-3 above and then instead of syncing perform a first-login procedure.</span>",
        "testData": null,
        "expectedResult": "<strong>Notes from testing with Martin on mysql.test, using QA group sync instance and OneLogin dev instance</strong>:<ul><li>User has uid set to mail in LDAP and NOT email in SAML</li><li>LDAP username mail (not actually significant to this test)</li><li>LDAP ID Attribute mail</li><li>SAML username username</li><li>ID Attribute username</li><li>mail in LDAP doesn't match username in SAML<br><br></li></ul><strong>In general</strong>:<ul><li>uid username don't necessarily have to match on both sides</li><li>emails match on both sides = fallback to email</li><li>until this story, group sync wasn't happening for that user</li><li>Now it is!</li></ul>",
        "customFields": {
          "Fix Versions": ["v5.14 (August 2019)"],
          "Related ticket(s)": "<a href=\"https://mattermost.atlassian.net/browse/MM-17117\">LDAP groups sync not using the email matching fallback used by LDAP sync — MM-17117</a>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "72151f0eed843871338a9d5654e9497ec34ed8960c8799f62389381719f6db840a19e0bcede879f8cbda1450151410e1",
  "stepsHashed": "0f3b42ff75ca147cc145b3418ed96af93040c859e799ac87bb3b7024677979d6ee03a8304b475b9b80e6e8142290e885"
}
