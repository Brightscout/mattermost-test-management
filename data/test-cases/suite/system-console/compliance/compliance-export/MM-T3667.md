---
key: MM-T3667
title: Download Compliance Export File - Only User with permission should download compliance export
---

## MM-T3667: Download Compliance Export File - Only User with permission should download compliance export

### Details

| Name     | Value                                                   |
| :------- | :------------------------------------------------------ |
| Priority | Smoke test                                              |
| Status   | Active                                                  |
| Folder   | Suite / System Console / Compliance / Compliance Export |
| Labels   | system-console                                          |
| Created  | 2021-01-12T18:17:43Z                                    |

### Steps

<hr/>

**Step 1**

> <article>1. Ensure the DownloadExportResults config is set to true in config.json and restart the server.&nbsp;<br>2. Login as System Admin and trigger a compliance export for CSV and ensure some messages are exported.&nbsp;<br>3. Now login as System Manager and notice that there is no option to view Compliance Exports.&nbsp;<br>4. Now trigger the following API:<br>/api/v4/jobs/type/message_export?page=0&amp;per_page=50<br>5. This will return the ID of the exported file which can be downloaded.&nbsp;<br>6. Now access the following API from the browser:<br>/api/v4/jobs/&lt;JOB_ID&gt;/download</article>

**Expected**

> <article>System User should not be able to download and following Json message should show up,<br><pre>"message":"You do not have the appropriate permissions."</pre><br><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1610475224466-1610475224465.png" style="width: 523px;" class="fr-fic fr-fil fr-dib"><br></article>

<hr/>

### More Info

| Name              | Value                                              |
| :---------------- | :------------------------------------------------- |
| Priority P1 to P4 | P3 - Deep Functions (Do extensive scenarios work?) |
| Team Ownership    | Suite Users                                        |
| Cypress           | Ticket Open                                        |
| Tags              | Never tested                                       |
| Location          | System Console                                     |
