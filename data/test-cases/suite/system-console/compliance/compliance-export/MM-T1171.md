---
key: MM-T1171
title: Compliance Export - Bot / webhook post indicates bot username in the export in Global Relay
---

## MM-T1171: Compliance Export - Bot / webhook post indicates bot username in the export in Global Relay

### Details

| Name     | Value                                                   |
| :------- | :------------------------------------------------------ |
| Priority | Normal                                                  |
| Status   | Active                                                  |
| Folder   | Suite / System Console / Compliance / Compliance Export |
| Labels   | system-console                                          |
| Created  | 2020-01-22T19:26:29Z                                    |

### Steps

<hr/>

**Step 1**

> <article>Compliance - Compliance Export - Custom Post Types<br />–––––––––––––––––––––––––<ol><li>Create a webhook</li><li>Post a user message</li><li>Simulate a bot and webhook post with these requests:<br /><br />{code}<br />curl -i -X POST -H "Content-Type: application/json" -d "{\"text\": \"This is an incoming webhook message\"}" http://127.0.0.1:8065/hooks/webhookidentifier<br />{code}<br /><br />{code}<br />curl -i -X POST -H "Content-Type: application/json" -d "{\"text\": \"This is a bot message\"}" http://127.0.0.1:8065/hooks/webhookidentifier<br />{code}<br /><br /></li><li>Update the {{Props}} setting for the second post using this query:<br /><br />{code:sql}<br />UPDATE Posts Set Props = '{"from_webhook":"true","html":"<strong>Test HTML</strong>","override_username":"test_username_override","webhook_display_name":"Test Bot"}', Type = 'custom_bot_type' WHERE Message = 'This is a bot message';<br />{code}<br /><br />Postman:<br />{<br />"username": "test_username_override",<br />"type": "custom_bot_type",<br />"text": "This is a bot message"<br />}<br /><br /></li><li>Run the Global Relay Export</li><li>Verify that the bot message you modified indicates the bot user name</li></ol></article>

**Test Data**

> <article><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1605085977550-Screen+Shot+2020-11-11+at+1.12.29+AM.png" style="width:380px" class="fr-fil fr-dib" /><br /><img src="https://smartbear-tm4j-prod-us-west-2-attachment-rich-text.s3.us-west-2.amazonaws.com/embedded-f3277290f945470c4add5d21ef3dc7ca7b74388fc7152bfb6b99ae58c66a95a8-1605086237869-Screen+Shot+2020-11-11+at+1.16.24+AM.png" style="width:300px" class="fr-fil fr-dib" /></article>

**Expected**

> <article><ul><li>The bot message "This is a bot message" should have the username @test_username_override instead of the webhook user.</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.18 (Dec 2019) |
| Related ticket(s) | (<strong><span style="color:rgb(65, 168, 95)">Story</span></strong>) <a href="https://mattermost.atlassian.net/browse/MM-17466">Add custom post types to compliance exports — MM-17466</a> |

<hr/>

### More Info

| Name                     | Value                                              |
| :----------------------- | :------------------------------------------------- |
| Fix Versions             | v5.18 (Dec 2019)                                   |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?) |
| Team Ownership           | Suite Users                                        |
| Manual Test Environments | Webapp,Cloud                                       |
| Cypress                  | Ticket Open                                        |
| Tags                     | Never tested                                       |
| Location                 | System Console                                     |
