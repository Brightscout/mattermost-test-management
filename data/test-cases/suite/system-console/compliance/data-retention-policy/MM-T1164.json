{
  "id": 4058894,
  "key": "MM-T1164",
  "name": "Data Retention - Entries not removed from Audits Table",
  "createdOn": "2020-01-22T19:26:28Z",
  "objective": null,
  "precondition": null,
  "estimatedTime": null,
  "labels": ["system-console"],
  "component": null,
  "priority": { "id": 401950, "name": "Normal" },
  "status": { "id": 890281, "name": "Active" },
  "folder": {
    "id": 569412,
    "name": "Data Retention Policy",
    "parentId": 570062,
    "fullNames": ["Suite", "System Console", "Compliance", "Data Retention Policy"],
    "fullPath": "suite/system-console/compliance/data-retention-policy"
  },
  "customFields": {
    "Fix Versions": ["v5.20 (Feb 2020)"],
    "Playwright": null,
    "Authors": "",
    "Priority P1 to P4": null,
    "Update notes": "",
    "Rainforest": ["N/A"],
    "Cypress Reports": null,
    "Team Ownership": ["Suite Users"],
    "Manual Test Environments": ["Webapp"],
    "Detox": null,
    "Cypress": "N/A",
    "MMCTL": null,
    "Last Updated": "",
    "Selenium": null,
    "Tags": ["Never tested"],
    "Location": "System Console"
  },
  "steps": [
    {
      "inline": {
        "description": "<strong><span style=\"color:rgb(184, 49, 47)\">** DO NOT RUN THIS TEST UNTIL WE HAVE A BACKUP DATABASE FOR THE TEST SERVER **</span></strong><br /><br />Data Retention - Entries not removed from Audits Table<br />–––––––––––––––––––––––––<ol><li>Ensure a user has logged in multiple times and there are records present in Account Settings ➜ Security ➜ Access History page (at least more than 30 days old)</li><li>Login as SysAdmin and navigate to System Console ➜ Data Retention Policy and set \"Message Retention\" to \"Keep messages for a set amount of time\" and 30 days</li><li>Run the Deletion Job Now and once the job is completed successfully, check if the user's login history more than 30 days old should not be deleted in Account Settings ➜ Security ➜ Access History page</li><li>Also check no records are deleted from the Audits table even when there are records older than 30 days in it.</li></ol>",
        "testData": "",
        "expectedResult": "<ul><li>Running the Deletion job in Data Retention Policy should not remove any entries related to user's Access history</li></ul>",
        "customFields": {
          "Fix Versions": ["v5.20 (Feb 2020)"],
          "Related ticket(s)": "(<strong><span style=\"color:rgb(65, 168, 95)\">Story</span></strong>) <a href=\"https://mattermost.atlassian.net/browse/MM-19877\">Data retention is deleting user login logs within the audit table — MM-19877</a>",
          "Important notes about this step": ""
        }
      },
      "testCase": null
    }
  ],
  "caseHashed": "47b35e6ac80bf40e72ec5faa0b5d4bb55de1dbd39362d8a211f477d89329c698faee5cda869c18b40c7bb1590052c9b9",
  "stepsHashed": "711eba943796407b90ddb511b8c362035a1773ad144260ea28cc636222a50b52746a559b115cc4508f2c462735f05b16"
}
