---
key: MM-T1164
title: Data Retention - Entries not removed from Audits Table
---

## MM-T1164: Data Retention - Entries not removed from Audits Table

### Details

| Name     | Value                                                       |
| :------- | :---------------------------------------------------------- |
| Priority | Normal                                                      |
| Status   | Active                                                      |
| Folder   | Suite / System Console / Compliance / Data Retention Policy |
| Labels   | system-console                                              |
| Created  | 2020-01-22T19:26:28Z                                        |

### Steps

<hr/>

**Step 1**

> <article><strong><span style="color:rgb(184, 49, 47)">** DO NOT RUN THIS TEST UNTIL WE HAVE A BACKUP DATABASE FOR THE TEST SERVER **</span></strong><br /><br />Data Retention - Entries not removed from Audits Table<br />–––––––––––––––––––––––––<ol><li>Ensure a user has logged in multiple times and there are records present in Account Settings ➜ Security ➜ Access History page (at least more than 30 days old)</li><li>Login as SysAdmin and navigate to System Console ➜ Data Retention Policy and set "Message Retention" to "Keep messages for a set amount of time" and 30 days</li><li>Run the Deletion Job Now and once the job is completed successfully, check if the user's login history more than 30 days old should not be deleted in Account Settings ➜ Security ➜ Access History page</li><li>Also check no records are deleted from the Audits table even when there are records older than 30 days in it.</li></ol></article>

**Expected**

> <article><ul><li>Running the Deletion job in Data Retention Policy should not remove any entries related to user's Access history</li></ul></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Fix Versions | v5.20 (Feb 2020) |
| Related ticket(s) | (<strong><span style="color:rgb(65, 168, 95)">Story</span></strong>) <a href="https://mattermost.atlassian.net/browse/MM-19877">Data retention is deleting user login logs within the audit table — MM-19877</a> |

<hr/>

### More Info

| Name                     | Value            |
| :----------------------- | :--------------- |
| Fix Versions             | v5.20 (Feb 2020) |
| Rainforest               | N/A              |
| Team Ownership           | Suite Users      |
| Manual Test Environments | Webapp           |
| Cypress                  | N/A              |
| Tags                     | Never tested     |
| Location                 | System Console   |
