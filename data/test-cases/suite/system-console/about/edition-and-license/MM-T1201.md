---
key: MM-T1201
title: Remove and re-add license - Permissions freeze in place when license is removed (and then re-added)
---

## MM-T1201: Remove and re-add license - Permissions freeze in place when license is removed (and then re-added)

### Details

| Name     | Value                                                               |
| :------- | :------------------------------------------------------------------ |
| Priority | Normal                                                              |
| Status   | Active                                                              |
| Folder   | Suite / System Console / About / Edition and License                |
| Labels   | TM4J-Key-Mapped-In-Cypress-Release,Cloud-N/A,cy-prod,system-console |
| Created  | 2020-01-22T21:45:03Z                                                |

### Steps

<hr/>

**Step 1**

> <article>Remove and re-add license - Permissions<br><br>UPDATE as of 4.10:<br><br>Permissions will now freeze in place when license is removed<br><br>CLI command can be used to reset to default permissions (There is also an option to "Reset to Defaults" within the System Scheme - to the far right of "Save" / "Cancel")<br><br>https://mattermost.atlassian.net/browse/MM-10121<br>--------------------<br><span style="color: rgb(184, 49, 47);">Ensure you have a license on hand to re-upload after it is removed during this test</span><br><ol><li>If not already EE, upload an EE license in System Console âžœ Edition and License</li><li>Go to System Console âžœ Permission Schemes âžœ System Scheme âžœ Edit Scheme</li><li>Under All Members âžœ Manage Public Channels, deselect "Create Channels"</li><li>Under All Members âžœ Manage Private Channels, deselect "Manage Channel Settings"</li><li>Under Team Administrators &gt; Manage Private Channels, select "Manage Channel Settings"</li><li>Save and verify on a member and a team admin account that they're restricted as described âžœ</li><li>(Ensure you have a license on hand to re-upload after this test. Links to test licences in header of https://community-release.mattermost.com/private-core/channels/enterprise-edition). Remove the EE license in System Console &gt; Edition and License and verify as described âžœ</li></ol></article>

**Expected**

> <article>After #5,<br><ul><li>Verify that system admin sees option to create public channels and team admins / members do not</li><li>Verify that team admin and system admin see option to rename private channel, and member does not</li></ul><br>After #7,<br><ul><li>Permissions are frozen in place (same as above "After step 5"):<ul><li>Verify that system admin sees option to create public channels and team admins / members do not</li><li>Verify that team admin and system admin see option to rename private channel, and member does not</li></ul></li></ul><br></article>

**Step Info**
| Name | Value |
| :--- | :--- |
| Important notes about this step | This should probably be folded into the Permissions tests at some point (it's always been in general System Console but that might not make sense anymore).<br><br>Add steps for using CLI to restore defaults (separately?)<br><br>After CLI command is run, permissions return to default (not restricted; open to all members). |

<hr/>

### More Info

| Name                     | Value                                                                                                                                                                                                                                                                                                                                                                                                |
| :----------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Priority P1 to P4        | P3 - Deep Functions (Do extensive scenarios work?)                                                                                                                                                                                                                                                                                                                                                   |
| Update notes             | Steve Mudie â€” Wednesday, December 23, 2020 3:14 PM<br>â€¢ Cypress Automation working as expected ðŸŽ‰<br>â€¢ Set Cypress status to âœ… in Production<br>â€¢ Removed from relevant Manual Environments<br>â€¢ Removed No Automated Executions label<br>â€¢ Removed TM4J-Key-Mapped-In-Cypress-Unstable label<br>â€¢ Added TM4J-Key-Mapped-In-Cypress-Release label<br>â€¢ Added link to Cypress code in Traceability tab |
| Cypress Reports          | RELEASE - TM4J-Key-Mapped-In-Cypress-Release - TM4J key found Cypress release run report (SDET/QA)                                                                                                                                                                                                                                                                                                   |
| Team Ownership           | Suite Users                                                                                                                                                                                                                                                                                                                                                                                          |
| Manual Test Environments | Automated - No manual tests needed                                                                                                                                                                                                                                                                                                                                                                   |
| Cypress                  | in Production                                                                                                                                                                                                                                                                                                                                                                                        |
| Tags                     | Cloud N/A                                                                                                                                                                                                                                                                                                                                                                                            |
| Location                 | System Console                                                                                                                                                                                                                                                                                                                                                                                       |
