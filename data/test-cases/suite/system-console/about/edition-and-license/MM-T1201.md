---
# (Required) Ensure all values are filled up
name: "Remove and re-add license - Permissions freeze in place when license is removed (and then re-added)"
status: Active
priority: Normal
folder: Edition and License
authors: ""
team_ownership: 
- Suite Users

# (Optional) Test type and tools
cypress: in Production
detox: null
mmctl: null
playwright: null
rainforest: []
manual_test_environments: 
- Automated - No manual tests needed

# (Optional)
component: null
priority_p1_to_p4: P3 - Deep Functions (Do extensive scenarios work?)
location: System Console
tags: 
- Cloud N/A
labels: 
- TM4J-Key-Mapped-In-Cypress-Release
- Cloud-N/A
- cy-prod
- system-console

# Do not change
id: 4060228
key: MM-T1201
folder_path: suite/system-console/about/edition-and-license
created_on: "2020-01-22T21:45:03Z"
last_updated: ""
case_hashed: 416de866d23c95bff93f0419877936ca65d56e52cc1cfcf17dcaba95a97a8eb0571c29c58a5f4b78451411b9d8fdcaac
steps_hashed: 061440529414e501f5763e5cc5458c87b49e2f91ab5b10496d8a2a7506dd3130c4487e850e09379db787557720edc284
---

## MM-T1201: Remove and re-add license - Permissions freeze in place when license is removed (and then re-added)

---

**Step 1**

Remove and re-add license - Permissions\
\
UPDATE as of 4.10:\
\
Permissions will now freeze in place when license is removed\
\
CLI command can be used to reset to default permissions (There is also an option to "Reset to Defaults" within the System Scheme - to the far right of "Save" / "Cancel")\
\
https\://mattermost.atlassian.net/browse/MM-10121\
\--------------------\
Ensure you have a license on hand to re-upload after it is removed during this test\\

1. If not already EE, upload an EE license in System Console ➜ Edition and License
2. Go to System Console ➜ Permission Schemes ➜ System Scheme ➜ Edit Scheme
3. Under All Members ➜ Manage Public Channels, deselect "Create Channels"
4. Under All Members ➜ Manage Private Channels, deselect "Manage Channel Settings"
5. Under Team Administrators > Manage Private Channels, select "Manage Channel Settings"
6. Save and verify on a member and a team admin account that they're restricted as described ➜
7. (Ensure you have a license on hand to re-upload after this test. Links to test licences in header of https\://community-release.mattermost.com/private-core/channels/enterprise-edition). Remove the EE license in System Console > Edition and License and verify as described ➜

_Important notes about this step:_

This should probably be folded into the Permissions tests at some point (it's always been in general System Console but that might not make sense anymore).\
\
Add steps for using CLI to restore defaults (separately?)\
\
After CLI command is run, permissions return to default (not restricted; open to all members).

**Expected**

After #5,\\

- Verify that system admin sees option to create public channels and team admins / members do not
- Verify that team admin and system admin see option to rename private channel, and member does not

After #7,\\

- Permissions are frozen in place (same as above "After step 5"):

  - Verify that system admin sees option to create public channels and team admins / members do not
  - Verify that team admin and system admin see option to rename private channel, and member does not
