---
key: MM-T2925
title: Trust protocols, auto-converting protocols to links and capturing unhandled exceptions
---

## MM-T2925: Trust protocols, auto-converting protocols to links and capturing unhandled exceptions

### Details

| Name     | Value                                       |
| :------- | :------------------------------------------ |
| Priority | Low                                         |
| Status   | Active                                      |
| Folder   | Desktop App (native-specific) / Permissions |
| Labels   | Desktop-app,smoke-test-folder               |
| Created  | 2020-06-10T17:28:09Z                        |

### Steps

<hr/>

**Step 1**

> <article>Trust protocol question:<br><ol><li>ensure you don't have spotify in your <code>&lt;configpath&gt;/Mattermost/allowedProtocols.json</code> or dont have that file&nbsp;</li><li>post a link with spotify protocol like:<br><code>[herbie hanckock](spotify:album:5fmIolILp5NAtNYiRPjhzA)</code></li><li>Click on the link</li></ol></article>

**Expected**

> <article><ul><li>Dialog should appear.&nbsp;<ul><li>if hitting No, dialog closes, file does not open</li><li>if hitting yes it won't save the new protocol, but still open on spotify</li><li>if hitting save it will add an entry to the above file</li></ul></li><li>if user chose save, the file must contain the entry and clicking again on the posted link should not raise the dialog again.</li></ul></article>

<hr/>

**Step 2**

> <article>Additional default protocols:<ol><li>Post the following<br><br>[email](mailto:someone@example.com) [http](http://mattermost.com) [https](https://mattermost.com) [ftp](http://ftp.hosteurope.de/mirror/ftp.kernel.org/pub/linux/kernel/) [tel](tel:+12025550168)<br><br></li><li>Click on each link</li></ol>Note: <br>[spotify](spotify:track:4Lvsivg09vKPfUpxpF3zcz) should still ask for permission to be trusted if not previously added to the trusted list </article>

**Expected**

> <article><ul><li>Protocols are automatically converted to links and marked as safe</li><li>Each clicked link should open the appropriate program and the desktop app shouldn't show a message about adding the protocol as trusted</li></ul></article>

<hr/>

**Step 3**

> <article><strong>N/A for now - We need to find a way to make the app crash in order to verify</strong><br>Unhandled exceptions:<br>Cause the app to crash and a dialog should appear offering user three choices:<br><ul><li>Ok&nbsp;</li><li>Show Details&nbsp;</li><li>Reopen&nbsp;</li></ul></article>

**Expected**

> <article><ul><li>Ok - Dismisses the dialog, closes the app</li><li>Show Details - window with info should appear, App closes</li><li>Reopen - app should close and reopen</li></ul></article>

<hr/>

### More Info

| Name                     | Value                        |
| :----------------------- | :--------------------------- |
| Fix Versions             | v4.5 Desktop App (June 2020) |
| Rainforest               | N/A                          |
| Team Ownership           | QA Platform                  |
| Manual Test Environments | Desktop                      |
| Tags                     | Smoke test                   |
| Location                 | Smoke Test                   |
